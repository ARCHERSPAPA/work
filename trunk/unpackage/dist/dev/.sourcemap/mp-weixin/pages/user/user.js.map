{"version":3,"sources":["uni-app:///main.js","webpack:///E:/app/trunk/pages/user/user.vue?a45c","webpack:///E:/app/trunk/pages/user/user.vue?c329","webpack:///E:/app/trunk/pages/user/user.vue?1597","webpack:///E:/app/trunk/pages/user/user.vue?6f3b","uni-app:///pages/user/user.vue","webpack:///E:/app/trunk/pages/user/user.vue?b5c6","webpack:///E:/app/trunk/pages/user/user.vue?0e0e"],"names":["createPage","Page"],"mappings":"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","file":"pages/user/user.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/user/user.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./user.vue?vue&type=template&id=3626c04f&\"\nvar renderjs\nimport script from \"./user.vue?vue&type=script&lang=js&\"\nexport * from \"./user.vue?vue&type=script&lang=js&\"\nimport style0 from \"./user.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/app/trunk/pages/user/user.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=template&id=3626c04f&\"","var components = {\n  mkbUserItem: function() {\n    return import(\n      /* webpackChunkName: \"components/mkb-user-item/mkb-user-item\" */ \"@/components/mkb-user-item/mkb-user-item.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"mkb-user\">\r\n\t\t<view class=\"mkb-user-login\">\r\n\t\t\t<view class=\"mkb-user-login-img\">\r\n\t\t\t\t<!-- <mkb-img-cut :imgUrl=\"loginUser.avatar\" v-if=\"loginStatus === 0\"></mkb-img-cut>\r\n\t\t\t\t<mkb-img-cut :imgUrl=\"avatarUrl\" v-else @click=\"$openPage('info')\"></mkb-img-cut> -->\r\n\t\t\t\t<image v-if=\"loginStatus === 0\" :src=\"loginUser.avatar\" lazy-load=\"true\" />\r\n\t\t\t\t<image v-else :src=\"avatarUrl\" lazy-load=\"true\" @click=\"$openPage('info')\" />\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t<text class=\"mkb-user-login-text\" @click=\"loginApp\">点击注册/登录</text>\r\n\t\t\t<!-- #endif -->\r\n\r\n\t\t\t<!-- #ifdef MP-WEIXIN -->\r\n\t\t\t<button v-if=\"loginStatus === 0\" class=\"mkb-user-login-text\" open-type=\"getUserInfo\" @getuserinfo=\"getUserInfo\">点击注册/登录</button>\r\n\t\t\t<!-- <button class=\"mkb-user-login-text\" v-if=\"loginStatus === 0\" open-type=\"getPhoneNumber\" @getphonenumber=\"getPhoneNumber\">点击注册/登录</button> -->\r\n\t\t\t<text v-else class=\"mkb-user-login-text\" @click=\"$openPage('info')\">{{ nickName }}</text>\r\n\t\t\t<!-- #endif -->\r\n\r\n\t\t</view>\r\n\t\t<view class=\"mkb-user-items\">\r\n\t\t\t<view v-for=\"(item,index) of loginUser.items\" :key=\"index\">\r\n\t\t\t\t<mkb-user-item :item=\"item\" @goTo=\"goUrl\" />\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view v-if=\"loginStatus && loginStatus === 1\" class=\"mkb-user-btn\">\r\n\t\t\t<button type=\"button\" @click=\"logout\">退出账号</button>\r\n\t\t</view>\r\n\t\t<!-- <custom-tab-bar :selected=\"2\" /> -->\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\timport mkbUserItem from '../../components/mkb-user-item/mkb-user-item.vue'\r\n\timport Messages from '../../util/messages.js'\r\n\timport Constant from '../../util/constant.js'\r\n\timport mkbImgCut from '../../components/mkb-img-cut/mkb-img-cut'\r\n\timport {\r\n\t\twxCheckLogin\r\n\t} from '../../util/login.js'\r\n\timport {\r\n\t\taxios\r\n\t} from '../../api/api.js'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tmkbUserItem,\r\n\t\t\tmkbImgCut\r\n\t\t\t// customTabBar\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState({\r\n\t\t\t\tisSdkReady: state => state.global.isSdkReady,\r\n\t\t\t\tuserInfo: state => state.userInfo,\r\n\t\t\t\tloginStatus: state => state.loginStatus,\r\n\t\t\t\tallUnreadCount: state => state.conversation.allUnreadCount\r\n\t\t\t})\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloginUser: {\r\n\t\t\t\t\tavatar: Constant.defaultHeadImg,\r\n\t\t\t\t\titems: [{\r\n\t\t\t\t\t\t\tsrc: Constant.defaultIconImgs[0],\r\n\t\t\t\t\t\t\ttext: '浏览记录',\r\n\t\t\t\t\t\t\turl: '/pagesUser/user-record/user-record',\r\n\t\t\t\t\t\t\tindex: 0\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsrc: Constant.defaultIconImgs[1],\r\n\t\t\t\t\t\t\ttext: '收藏记录',\r\n\t\t\t\t\t\t\turl: '/pagesUser/user-record/user-record',\r\n\t\t\t\t\t\t\tindex: 2\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tsrc: Constant.defaultIconImgs[2],\r\n\t\t\t\t\t\t\ttext: '点赞记录',\r\n\t\t\t\t\t\t\turl: '/pagesUser/user-record/user-record',\r\n\t\t\t\t\t\t\tindex: 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t],\r\n\t\t\t\t\tname: ''\r\n\t\t\t\t},\r\n\t\t\t\tavatarUrl: Constant.defaultHeadImg,\r\n\t\t\t\tnickName: '注册/登录'\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonShow() {\r\n\t\t\tthis.checkLogin()\r\n\t\t\tconst page = this.$mp.page\r\n\t\t\tif (typeof page.getTabBar === 'function' && page.getTabBar()) {\r\n\t\t\t\tpage.getTabBar().setData({\r\n\t\t\t\t\tselected: 3\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\t/**\r\n\t\t\t * 获取缓存中的用户信息\r\n\t\t\t */\r\n\t\t\tgetUserInfoAsyn() {\r\n\t\t\t\tif (uni.getStorageSync('userInfo')) {\r\n\t\t\t\t\tconst userInfo = uni.getStorageSync('userInfo')\r\n\t\t\t\t\tif (userInfo.avatarUrl) {\r\n\t\t\t\t\t\tthis.avatarUrl = userInfo.avatarUrl\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.nickName = userInfo.nickName ? userInfo.nickName : userInfo.phone\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * h5登录\r\n\t\t\t */\r\n\t\t\tloginApp() {\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '登录提示',\r\n\t\t\t\t\tcontent: '请在微信搜索小程序【在线装修】',\r\n\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\tconfirmText: '确定'\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 列表跳转\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tgoUrl(e) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\tanimationType: 'pop-in',\r\n\t\t\t\t\tanimationDuration: 200,\r\n\t\t\t\t\turl: `${e.url}?type=${e.type}`\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 微信用户授权\r\n\t\t\t * @param {Object} e\r\n\t\t\t */\r\n\t\t\tgetUserInfo(e) {\r\n\t\t\t\tif (e.detail && e.detail.rawData) {\r\n\t\t\t\t\tthis.wxUserLogin()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\t\tcontent: Messages.APPLY_AUTH,\r\n\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\tconfirmColor: Constant.defaultThemeColor\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 微信用户授权登录\r\n\t\t\t * @param {Object} detail\r\n\t\t\t */\r\n\t\t\twxUserLogin() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: Messages.AUTH_LOADING\r\n\t\t\t\t})\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tprovider: 'weixin',\r\n\t\t\t\t\tsuccess: (loginRes) => {\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\twx.getUserInfo({\r\n\t\t\t\t\t\t\tsuccess: (user) => {\r\n\t\t\t\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\t\t\t\tcode: loginRes.code,\r\n\t\t\t\t\t\t\t\t\trawData: user.rawData,\r\n\t\t\t\t\t\t\t\t\tsignature: user.signature,\r\n\t\t\t\t\t\t\t\t\tencryptedData: user.encryptedData,\r\n\t\t\t\t\t\t\t\t\tiv: user.iv\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthat.authLogin(params)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 用户授权登录使用\r\n\t\t\t * @param {Object} params\r\n\t\t\t */\r\n\t\t\tauthLogin(params) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tthat.$http.login(params).then(res => {\r\n\t\t\t\t\tif (res && res.code == 200) {\r\n\t\t\t\t\t\tconst userInfo = {\r\n\t\t\t\t\t\t\tavatarUrl: res.data.avatarUrl,\r\n\t\t\t\t\t\t\tnickName: res.data.nickName,\r\n\t\t\t\t\t\t\tisSubscribe: res.data.isSubscribe,\r\n\t\t\t\t\t\t\tisService: res.data.isService,\r\n\t\t\t\t\t\t\tuserId: res.data.userId\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (userInfo.avatarUrl) {\r\n\t\t\t\t\t\t\tthat.avatarUrl = userInfo.avatarUrl\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthat.nickName = userInfo.nickName\r\n\t\t\t\t\t\tthat.$store.commit('setToken', res.data.token)\r\n\t\t\t\t\t\tthat.$store.commit('setUserInfo', userInfo)\r\n\t\t\t\t\t\tthat.$store.commit('setLoginStatus', 1)\r\n\r\n\t\t\t\t\t\tthat.imLogin(res.data.userId)\r\n\t\t\t\t\t\tconsole.log(userInfo)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\ttitle: res.msg || Messages.FAIL_INFO\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: err.msg || Messages.FAIL_INFO\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 退出\r\n\t\t\tlogout() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\t\tthat.$http.logout({})\r\n\t\t\t\t\t.then(res => {\r\n\t\t\t\t\t\tif (res && res.code == 200) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\ttitle: Messages.SUCCESS_LOGOUT\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthat.$store.commit('logout')\r\n\t\t\t\t\t\t\tthat.imLoginOut()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\ttitle: Messages.FAIL_LOGOUT\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 检查session 是否已经登录\r\n\t\t\t */\r\n\t\t\tcheckLogin() {\r\n\t\t\t\twxCheckLogin(this.$http).then(res => {\r\n\t\t\t\t\tif (res && res.token) {\r\n\t\t\t\t\t\tconst userInfo = {\r\n\t\t\t\t\t\t\tavatarUrl: res.avatarUrl,\r\n\t\t\t\t\t\t\tnickName: res.nickName,\r\n\t\t\t\t\t\t\tisSubscribe: res.isSubscribe,\r\n\t\t\t\t\t\t\tuserId: res.userId,\r\n\t\t\t\t\t\t\thavePhone: res.havePhone\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (userInfo.avatarUrl) {\r\n\t\t\t\t\t\t\tthis.avatarUrl = userInfo.avatarUrl\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.nickName = userInfo.nickName\r\n\t\t\t\t\t\tthis.$store.commit('setToken', res.token)\r\n\t\t\t\t\t\tthis.$store.commit('setUserInfo', userInfo)\r\n\t\t\t\t\t\tthis.$store.commit('setLoginStatus', 1)\r\n\t\t\t\t\t\tconsole.log(userInfo);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$store.commit('logout')\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err =>{\r\n\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\tthis.$store.commit(\"logout\");\r\n\t\t\t\t})\r\n\t\t\t\t// const that = this;\r\n\t\t\t\t//  uni.login({\r\n\t\t\t\t//    provider: 'weixin',\r\n\t\t\t\t//    success: (loginRes) => {\r\n\t\t\t\t//      if (loginRes && loginRes.code) {\r\n\t\t\t\t//        that.$store.commit('setRandCode', loginRes.code)\r\n\t\t\t\t//        that.$http.getSessionToken({\r\n\t\t\t\t//          code: loginRes.code\r\n\t\t\t\t//        })\r\n\t\t\t\t//          .then(res => {\r\n\t\t\t\t//            if (res && res.code == 200) {\r\n\t\t\t\t//              if (res.data && res.data.token) {\r\n\t\t\t\t//                const userInfo = {\r\n\t\t\t\t//                  avatarUrl: res.data.avatarUrl,\r\n\t\t\t\t//                  nickName: res.data.nickName,\r\n\t\t\t\t//                  isSubscribe: res.data.isSubscribe,\r\n\t\t\t\t//                  userId: res.data.userId,\r\n\t\t\t\t//                  havePhone: res.data.havePhone\r\n\t\t\t\t//                }\r\n\t\t\t\t// if(userInfo.avatarUrl){\r\n\t\t\t\t// \tthat.avatarUrl = userInfo.avatarUrl\t\r\n\t\t\t\t// }\r\n\t\t\t\t//                that.nickName = userInfo.nickName\r\n\t\t\t\t//                that.$store.commit('setToken', res.data.token)\r\n\t\t\t\t//                that.$store.commit('setUserInfo', userInfo)\r\n\t\t\t\t//                that.$store.commit('setLoginStatus', 1)\r\n\t\t\t\t// console.log(userInfo);\r\n\t\t\t\t//              } else {\r\n\t\t\t\t//                that.$store.commit('logout')\r\n\t\t\t\t//              }\r\n\t\t\t\t//            } else {\r\n\t\t\t\t//              that.$store.commit('logout')\r\n\t\t\t\t//            }\r\n\t\t\t\t//          })\r\n\t\t\t\t//      }\r\n\t\t\t\t//    }\r\n\t\t\t\t//  })\r\n\t\t\t},\r\n\r\n\t\t\t// im登录\r\n\t\t\timLogin(id) {\r\n\t\t\t\tconst self = this\r\n\r\n\t\t\t\tself.$http.tencentyunUserSig({\r\n\t\t\t\t\t\tid\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\tconst {\r\n\t\t\t\t\t\t\tuserId,\r\n\t\t\t\t\t\t\tuserSig\r\n\t\t\t\t\t\t} = res.data\r\n\t\t\t\t\t\tconst promise = self.$tim.login({\r\n\t\t\t\t\t\t\tuserID: userId,\r\n\t\t\t\t\t\t\tuserSig\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tpromise.then(function(imResponse) { //\r\n\t\t\t\t\t\t\t// console.log('登录成功---', imResponse.data)\r\n\t\t\t\t\t\t}).catch(function(imError) {\r\n\t\t\t\t\t\t\tconsole.warn('login error:', imError) // 登录失败的相关信息\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// im登出\r\n\t\t\timLoginOut(id) {\r\n\t\t\t\tconst self = this\r\n\r\n\t\t\t\tthis.$store.commit('restAllUnreadCount')\r\n\r\n\t\t\t\tconst promise = this.$tim.logout()\r\n\t\t\t\tpromise.then(function(imResponse) {\r\n\t\t\t\t\t// console.log(imResponse.data) // 登出成功\r\n\t\t\t\t}).catch(function(imError) {\r\n\t\t\t\t\tconsole.warn('logout error:', imError)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\t@import \"../../mixin/common.scss\";\r\n\r\n\t.mkb-user {\r\n\t\twidth: 100%;\r\n\t\toverflow: hidden;\r\n\r\n\t\t&-login {\r\n\t\t\tdisplay: flex;\r\n\t\t\theight: 202.89rpx;\r\n\t\t\tpadding: 0 28.98rpx;\r\n\t\t\talign-items: center;\r\n\t\t\tbackground-color: $col_098684;\r\n\r\n\t\t\t&-img {\r\n\t\t\t\twidth: 115.94rpx;\r\n\t\t\t\theight: 115.94rpx;\r\n\t\t\t\tborder-radius: 115.94rpx;\r\n\t\t\t\toverflow: hidden;\r\n\r\n\t\t\t\timage {\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t&-text {\r\n\t\t\t\t// display: inline-block;\r\n\t\t\t\t// 2.71rpx\r\n\t\t\t\twidth: calc(100% - 138.27rpx);\r\n\t\t\t\tfont-size: 36.23rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\t// color: $col_098684;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\t// margin-top: 67.93rpx;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t\tmargin-left: 0;\r\n\t\t\t\tline-height: 1;\r\n\t\t\t\tbackground: transparent;\r\n\t\t\t\toutline: none;\r\n\t\t\t\tpadding-left: 28.98rpx;\r\n\t\t\t\t@include eclipse;\r\n\r\n\t\t\t\t&:after {\r\n\t\t\t\t\tborder: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t&-items {\r\n\t\t\tpadding: 18.11rpx 28.98rpx;\r\n\r\n\t\t\t&>view {\r\n\t\t\t\t&:last-child {\r\n\t\t\t\t\tborder-bottom: 1.81rpx solid #dedede;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t&-btn {\r\n\t\t\tbutton {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t\theight: 108.69rpx;\r\n\t\t\t\tline-height: 108.69rpx;\r\n\t\t\t\tfont-size: 32.6rpx;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tcolor: rgba(250, 81, 81, 1);\r\n\t\t\t\toutline: none;\r\n\t\t\t\tborder: 0;\r\n\t\t\t\tbackground: #fff;\r\n\r\n\t\t\t\t&:after {\r\n\t\t\t\t\tborder: 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1594366135267\n      var cssReload = require(\"D:/HBuilderX.2.6.1.20200226.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}