{"version":3,"sources":["webpack:///E:/app/trunk/components/gaoyia-parse/parse.vue?176e","webpack:///E:/app/trunk/components/gaoyia-parse/parse.vue?572c","webpack:///E:/app/trunk/components/gaoyia-parse/parse.vue?a13e","webpack:///E:/app/trunk/components/gaoyia-parse/parse.vue?13dd","uni-app:///components/gaoyia-parse/parse.vue"],"names":[],"mappings":"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","file":"components/gaoyia-parse/parse.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./parse.vue?vue&type=template&id=07e5f28a&\"\nvar renderjs\nimport script from \"./parse.vue?vue&type=script&lang=js&\"\nexport * from \"./parse.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"E:/app/trunk/components/gaoyia-parse/parse.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./parse.vue?vue&type=template&id=07e5f28a&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./parse.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./parse.vue?vue&type=script&lang=js&\"","<!--**\n * forked from：https://github.com/F-loat/mpvue-wxParse\n *\n * github地址: https://github.com/dcloudio/uParse\n *\n * for: uni-app框架下 富文本解析\n *\n * 优化 by gaoyia@qq.com  https://github.com/gaoyia/parse\n */-->\n\n<template>\n  <!--基础元素-->\n  <div class=\"wxParse \" :class=\"className\" :style=\"'user-select:' + userSelect\">\n\n    <block v-for=\"(node, index) of nodes\" v-if=\"!loading\" :key=\"index\">\n      <wxParseTemplate :node=\"node\" />\n    </block>\n  </div>\n</template>\n\n<script>\nimport HtmlToJson from './libs/html2json'\nimport wxParseTemplate from './components/wxParseTemplate0'\n\nexport default {\n  name: 'WxParse',\n  components: {\n    wxParseTemplate\n  },\n  props: {\n    // user-select:none;\n    userSelect: {\n      type: String,\n      default: 'text' // none |text| all | element\n    },\n    imgOptions: {\n      type: [Object, Boolean],\n      default: function() {\n        return {\n          loop: false,\n          indicator: 'number',\n          longPressActions: false\n          // longPressActions: {\n          // \t itemList: ['发送给朋友', '保存图片', '收藏'],\n          // \t\tsuccess: function (res) {\n          // \t\t\tconsole.log('选中了第' + (res.tapIndex + 1) + '个按钮');\n          // \t\t},\n          // \t\tfail: function (res) {\n          // \t\t\tconsole.log(res.errMsg);\n          // \t\t}\n          // \t}\n          // }\n        }\n      }\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    className: {\n      type: String,\n      default: ''\n    },\n    content: {\n      type: String,\n      default: ''\n    },\n    noData: {\n      type: String,\n      default: ''\n    },\n    startHandler: {\n      type: Function,\n      default() {\n        return node => {\n          node.attr.class = null\n          node.attr.style = null\n        }\n      }\n    },\n    endHandler: {\n      type: Function,\n      default: null\n    },\n    charsHandler: {\n      type: Function,\n      default: null\n    },\n    imageProp: {\n      type: Object,\n      default() {\n        return {\n          mode: 'aspectFit',\n          padding: 0,\n          lazyLoad: false,\n          domain: ''\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      nodes: {},\n      imageUrls: [],\n      wxParseWidth: {\n        value: 0\n      }\n    }\n  },\n  computed: {},\n  watch: {\n    content() {\n      this.setHtml()\n    }\n  },\n  mounted() {\n    this.setHtml()\n  },\n  methods: {\n    setHtml() {\n      this.getWidth().then((data) => {\n        this.wxParseWidth.value = data\n      })\n      const {\n        noData,\n        imageProp,\n        startHandler,\n        endHandler,\n        charsHandler\n      } = this\n      const parseData = this.content\n      const customHandler = {\n        start: startHandler,\n        end: endHandler,\n        chars: charsHandler\n      }\n      const results = HtmlToJson(parseData, customHandler, imageProp, this)\n      this.imageUrls = results.imageUrls\n\n      this.nodes = []\n      results.nodes.forEach((item) => {\n        setTimeout(() => {\n          this.nodes.push(item)\n        }, 0)\n      })\n    },\n    getWidth() {\n      return new Promise((res, rej) => {\n        // #ifndef MP-ALIPAY || MP-BAIDU\n        uni.createSelectorQuery()\n          .in(this)\n          .select('.wxParse')\n          .fields({\n            size: true,\n            scrollOffset: true\n          },\n          data => {\n            res(data.width)\n          }\n          ).exec()\n        // #endif\n        // #ifdef MP-BAIDU\n        const query = swan.createSelectorQuery()\n        query.select('.wxParse').boundingClientRect()\n        query.exec(obj => {\n          const rect = obj[0]\n          if (rect) {\n            res(rect.width)\n          }\n        })\n        // #endif\n        // #ifdef MP-ALIPAY\n        my.createSelectorQuery()\n          .select('.wxParse')\n          .boundingClientRect().exec((ret) => {\n            res(ret[0].width)\n          })\n        // #endif\n      })\n    },\n    navigate(href, $event, attr) {\n      console.log(href, attr)\n      this.$emit('navigate', href, $event)\n    },\n    preview(src, $event) {\n      if (!this.imageUrls.length || typeof this.imgOptions === 'boolean') {\n\n      } else {\n        uni.previewImage({\n          current: src,\n          urls: this.imageUrls,\n          loop: this.imgOptions.loop,\n          indicator: this.imgOptions.indicator,\n          longPressActions: this.imgOptions.longPressActions\n        })\n      }\n      this.$emit('preview', src, $event)\n    },\n    removeImageUrl(src) {\n      const {\n        imageUrls\n      } = this\n      imageUrls.splice(imageUrls.indexOf(src), 1)\n    }\n  },\n  // 父组件中提供\n  provide() {\n    return {\n      parseWidth: this.wxParseWidth,\n      parseSelect: this.userSelect\n      // 提示：provide 和 inject 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的属性还是可响应的。\n    }\n  }\n}\n</script>\n"],"sourceRoot":""}