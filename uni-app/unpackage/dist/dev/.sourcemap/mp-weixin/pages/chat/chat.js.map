{"version":3,"sources":["webpack:///E:/xiaochengxu/v2.2.3/App.vue?87c8","webpack:///E:/xiaochengxu/v2.2.3/App.vue","webpack:///E:/xiaochengxu/v2.2.3/App.vue?6976","webpack:///E:/xiaochengxu/v2.2.3/App.vue?f8f8","webpack:///E:/xiaochengxu/v2.2.3/main.js","webpack:///E:/xiaochengxu/v2.2.3/pages/chat/chat.vue?1512","webpack:///E:/xiaochengxu/v2.2.3/pages/chat/chat.vue?1e9e","webpack:///E:/xiaochengxu/v2.2.3/pages/chat/chat.vue?f235","webpack:///E:/xiaochengxu/v2.2.3/pages/chat/chat.vue?9770","webpack:///E:/xiaochengxu/v2.2.3/pages/chat/chat.vue","webpack:///E:/xiaochengxu/v2.2.3/pages/chat/chat.vue?2b48","webpack:///E:/xiaochengxu/v2.2.3/pages/chat/chat.vue?0817","webpack:///E:/xiaochengxu/v2.2.3/App.vue?74fb"],"names":["Services","require","RongIMLib","globalData","data","appKey","token","wx","getStorageSync","computed","userInfo","$store","state","loginStatus","onLaunch","that","uni","dispatch","console","log","canIUse","updateManager","getUpdateManager","onCheckForUpdate","res","hasUpdate","onUpdateReady","showModal","title","content","success","confirm","applyUpdate","onUpdateFailed","checkLogin","onShow","methods","login","provider","loginRes","code","$http","getSessionToken","then","avatarUrl","isSubscribe","nickName","userId","commit","initSDK","context","self","imUserRegister","id","name","portraitUri","modules","protobuf","params","connectToken","callbacks","receiveNewMessage","message","$emit","getCurrentUser","onTokenIncorrect","networkError","msg","Status","getCurrentConnectionStatus","reconnect","watchConversationList","list","init","catch","err","createPage","Page","components","chatItem","chatInput","toLast","text","headUrl","chatList","imgList","targetId","scrollTop","style","pageHeight","contentViewHeight","footViewHeight","mitemHeight","formatTime","showTime","index","msgList","length","numTime","onLoad","$parseURL","userName","setNavigationBarTitle","loadHistoryMsg","app","Conversation","clearUnreadCount","$on","messageDirection","isMy","push","createImgList","Message","getHistory","forEach","item","timestamp","messageName","imageUri","handleLoadMone","sentTime","reverse","unshift","handleSendMsgFunc","info","imCheckOnline","imUserGet","result","sendText","portrait","userPortrait","meid","meportrait","mename","status","sendSubscribeMsg","toUserId","handleSendImgMsgFunc","imgUrl","sendImage","url"],"mappings":"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","file":"pages/chat/chat.js","sourcesContent":["import mod from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"","\n\timport {\n\t\timConfig\n\t} from './util/config.js'\n\tconst Services = require('./util/services.js');\n\tconst RongIMLib = require('./lib/RongIMLib.wx-1.2.0.js');\n\texport default {\n\t\tglobalData: {\n\t\t\tServices: Services\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tdata: {\n\t\t\t\t\tappKey: 'bmdehs6pbguas',\n\t\t\t\t\ttoken: wx.getStorageSync('token'),\n\t\t\t\t},\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tuserInfo() {\n\t\t\t\treturn this.$store.state.userInfo\n\t\t\t},\n      loginStatus() {\n      \treturn this.$store.state.loginStatus\n      }\n\t\t},\n\n\t\t// 应用生命周期仅可在App.vue中监听，在其它页面监听无效。\n\t\tonLaunch: function() {\n\n\t\t\tlet that = this\n\n\t\t\t// wx.setEnableDebug({\n\t\t\t// \tenableDebug: true\n\t\t\t// });\n\t\t\tif (uni.getStorageSync('token')) {\n\t\t\t\tif (uni.getStorageSync('userInfo')) {\n\t\t\t\t\tthat.$store.dispatch('setLoginStatus', 1)\n\t\t\t\t\tthat.$store.dispatch('setUserInfo', uni.getStorageSync('userInfo'))\n\t\t\t\t\t// } else {\n\t\t\t\t\t// that.$store.dispatch('setLoginStatus', 1)\n\t\t\t\t\t// that.$store.dispatch('setUserInfo', uni.getStorageSync('userInfo'))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthat.$store.dispatch('setLoginStatus', 0);\n\t\t\t\tthat.$store.dispatch('logout');\n\t\t\t}\n      \n      console.log('loading login status.......', this.$store.state.loginStatus)\n\n\n\t\t\tif (wx.canIUse('getUpdateManager')) {\n\t\t\t\tconst updateManager = wx.getUpdateManager()\n\t\t\t\tupdateManager.onCheckForUpdate(function(res) {\n\t\t\t\t\tconsole.log('onCheckForUpdate====', res)\n\t\t\t\t\t// 请求完新版本信息的回调\n\t\t\t\t\tif (res.hasUpdate) {\n\t\t\t\t\t\tconsole.log('res.hasUpdate====')\n\t\t\t\t\t\tupdateManager.onUpdateReady(function() {\n\t\t\t\t\t\t\twx.showModal({\n\t\t\t\t\t\t\t\ttitle: '更新提示',\n\t\t\t\t\t\t\t\tcontent: '新版本已经准备好，是否重启应用？',\n\t\t\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t\t\tconsole.log('success====', res)\n\t\t\t\t\t\t\t\t\t// res: {errMsg: \"showModal: ok\", cancel: false, confirm: true}\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\t\t\t\t// 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\n\t\t\t\t\t\t\t\t\t\tupdateManager.applyUpdate()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t\tupdateManager.onUpdateFailed(function() {\n\t\t\t\t\t\t\t// 新的版本下载失败\n\t\t\t\t\t\t\twx.showModal({\n\t\t\t\t\t\t\t\ttitle: '已经有新版本了哟~',\n\t\t\t\t\t\t\t\tcontent: '新版本已经上线啦~，请您删除当前小程序，重新搜索打开哟~'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\n\n\t\t\tthis.checkLogin();\n\t\t\t// this.getCategory();\n\t\t},\n    \n    \n    onShow() {\n      // console.log(11111)\n      // if (this.loginStatus === 1) {\n      //   this.initSDK(this);\n      // }\n    },\n\t\tmethods: {\n\t\t\t/**\n\t\t\t * 检查session 是否已经登录\n\t\t\t */\n\t\t\tcheckLogin() {\n\t\t\t\tlet that = this;\n\t\t\t\t// uni.showLoading({title:\"加载中\"});\n\t\t\t\tuni.login({\n\t\t\t\t\tprovider: \"weixin\",\n\t\t\t\t\tsuccess: (loginRes) => {\n\t\t\t\t\t\t// uni.hideLoading();\n\t\t\t\t\t\tif (loginRes && loginRes.code) {\n\t\t\t\t\t\t\tthat.$http.getSessionToken({\n\t\t\t\t\t\t\t\t\tcode: loginRes.code\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then(res => {\n\t\t\t\t\t\t\t\t\tif (res && res.code == 200 && res.data && res.data.token) {\n\t\t\t\t\t\t\t\t\t\tlet userInfo = {\n\t\t\t\t\t\t\t\t\t\t\tavatarUrl: res.data.avatarUrl,\n\t\t\t\t\t\t\t\t\t\t\tisSubscribe: res.data.isSubscribe,\n\t\t\t\t\t\t\t\t\t\t\tnickName: res.data.nickName,\n\t\t\t\t\t\t\t\t\t\t\tuserId: res.data.userId\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tthat.avatarUrl = userInfo.avatarUrl;\n\t\t\t\t\t\t\t\t\t\tthat.nickName = userInfo.nickName;\n\t\t\t\t\t\t\t\t\t\tthat.$store.commit('setToken', res.data.token);\n\t\t\t\t\t\t\t\t\t\tthat.$store.commit('setUserInfo', userInfo);\n\t\t\t\t\t\t\t\t\t\tthat.$store.commit('setLoginStatus', 1);\n\t\t\t\t\t\t\t\t\t\t// that.initSDK(that);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\n\t\t\tinitSDK(context) {\n\n\t\t\t\tconst self = this\n\n\t\t\t\tlet appKey = context.data.appKey;\n\t\t\t\tlet token = context.data.token;\n\n\t\t\t\tif (appKey == '' || token == '') {\n\t\t\t\t\t// return showPrompt('必须提供 appKey 和 token');\n\t\t\t\t}\n\n\t\t\t\tthis.$http\n\t\t\t\t\t.imUserRegister({\n\t\t\t\t\t\tid: self.userInfo.userId,\n\t\t\t\t\t\tname: self.userInfo.nickName,\n\t\t\t\t\t\tportraitUri: self.userInfo.avatarUrl,\n\t\t\t\t\t})\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tconsole.log(res)\n\n\t\t\t\t\t\t// 公有云初始化\n\t\t\t\t\t\tlet modules = {\n\t\t\t\t\t\t\t//protobuf: 'https://cdn.ronghub.com/protobuf-2.3.1.min.js' //支持http(s)网络路径、本地相对路径,\n\t\t\t\t\t\t\tRongIMLib: RongIMLib,\n\t\t\t\t\t\t\tprotobuf: null\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tlet params = {\n\t\t\t\t\t\t\tappKey: appKey,\n\t\t\t\t\t\t\ttoken: token,\n\t\t\t\t\t\t\tconnectToken: res.data.token\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tlet callbacks = {\n\t\t\t\t\t\t\treceiveNewMessage: function(message) {\n\t\t\t\t\t\t\t\tuni.$emit('newMessage', message)\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tgetCurrentUser: function(userInfo) {},\n\t\t\t\t\t\t\tonTokenIncorrect: function() {\n\t\t\t\t\t\t\t\tconsole.log(\"token错误重新连接\")\n\t\t\t\t\t\t\t},\n              networkError(msg){\n                console.log(self.globalData.Services.Status.getCurrentConnectionStatus());\n                self.globalData.Services.Status.reconnect();\n              },\n\t\t\t\t\t\t\twatchConversationList: function(list) {\n\t\t\t\t\t\t\t\tconsole.log(list)\n                uni.$emit('newMessageList', list)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.globalData.Services.init(params, callbacks, modules);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.log(err)\n\t\t\t\t\t})\n\t\t\t},\n\n\t\t\t/**\n\t\t\t * 获取categorys\n\t\t\t */\n\t\t\t// getCategory() {\n\t\t\t// \tif (!uni.getStorageSync(\"catalogues\")) {\n\t\t\t// \t\tthis.$http.getCategory({}).then(res => {\n\t\t\t// \t\t\tthis.$store.commit('setCatalogues', res.data);\n\t\t\t// \t\t});\n\t\t\t// \t}\n\n\t\t\t// },\n\n\t\t}\n\n\t}\n","import mod from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin","import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/chat/chat.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chat.vue?vue&type=template&id=21e0e6ee&\"\nvar renderjs\nimport script from \"./chat.vue?vue&type=script&lang=js&\"\nexport * from \"./chat.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chat.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('21e0e6ee')) {\n      api.createRecord('21e0e6ee', component.options)\n    } else {\n      api.reload('21e0e6ee', component.options)\n    }\n    module.hot.accept(\"./chat.vue?vue&type=template&id=21e0e6ee&\", function () {\n      api.rerender('21e0e6ee', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/xiaochengxu/v2.2.3/pages/chat/chat.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=template&id=21e0e6ee&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.chatList, function(item, index) {\n    var m0 = Number(index + 1)\n    var m1 = _vm.showTime(index, _vm.chatList)\n    var m2 = _vm.formatTime(item.sentTime)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0,\n      m1: m1,\n      m2: m2\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport chatItem from '../../components/chat-item/chat-item.vue'\r\nimport chatInput from '../../components/chat-input/chat-input.vue'\r\nimport app from '../../App.vue'\r\nimport { formatTime } from '../../util/util.js'\r\nexport default {\r\n  components: {\r\n    chatItem,\r\n    chatInput\r\n  },\r\n  data() {\r\n    return {\r\n      toLast: '',\r\n      name: '',\r\n      text: '',\r\n      headUrl: '',\r\n      chatList: [],\r\n      imgList: [],\r\n      targetId: '',\r\n      scrollTop: '',\r\n      // 聊天页面时时滚动样式\r\n      style: {\r\n        pageHeight: 0,\r\n        contentViewHeight: 0,\r\n        footViewHeight: 90,\r\n        mitemHeight: 0\r\n      },\r\n      formatTime,\r\n      showTime(index, msgList) {\r\n        if (index < msgList.length && index > 0) {\r\n          let numTime\r\n\r\n          // if(index === msgList.length-1){\r\n          //   numTime = new Date().getTime()\r\n          //   console.log(numTime)\r\n          //   console.log(msgList[index]['sentTime'])\r\n          //   console.log(numTime - msgList[index]['sentTime'] )\r\n          //   console.log(numTime - msgList[index]['sentTime'] > 10*60*1000)\r\n          // }else{\r\n          numTime = msgList[index]['sentTime']\r\n          // }\r\n\r\n          if (numTime - msgList[index - 1]['sentTime'] > 10 * 60 * 1000) {\r\n            return true\r\n          } else {\r\n            return false\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    userInfo() {\r\n      return this.$store.state.userInfo\r\n    }\r\n  },\r\n  onLoad() {\r\n    const self = this\r\n\r\n    this.targetId = this.$parseURL().targetId\r\n    this.avatarUrl = this.$parseURL().avatarUrl\r\n    this.userName = this.$parseURL().userName\r\n\r\n    uni.setNavigationBarTitle({\r\n      title: this.userName\r\n    })\r\n\r\n    this.loadHistoryMsg()\r\n\r\n    // 清除未读\r\n    app.globalData.Services.Conversation.clearUnreadCount(function(res) {\r\n      console.log(res)\r\n    }, {\r\n      targetId: this.targetId\r\n    })\r\n\r\n    // 事件触发\r\n    uni.$on('newMessage', function(res) {\r\n      // 判断新消息是不是当前对象\r\n      if (self.targetId == res.targetId) {\r\n        // app.globalData.Services.Conversation.clearUnreadCount(function(res) {\r\n        //   console.log(res)\r\n        // }, {\r\n        //    targetId: self.targetId\r\n        // })\r\n        if (res.messageDirection === 1) {\r\n          res.isMy = true\r\n          res.headUrl = self.userInfo.avatarUrl\r\n        } else {\r\n          res.isMy = false\r\n          res.headUrl = self.avatarUrl\r\n        }\r\n\r\n        console.log(res)\r\n\r\n        self.chatList.push(res)\r\n        self.createImgList(res)\r\n\r\n        // 滚动\r\n        self.toLast = 'item' + self.chatList.length\r\n      } else {\r\n        // console.log(self.targetId)\r\n        // console.log(res.targetId)\r\n\r\n      }\r\n    })\r\n  },\r\n  methods: {\r\n    loadHistoryMsg() {\r\n      const self = this\r\n\r\n      // 历史聊天记录获取\r\n      app.globalData.Services.Message.getHistory(function(res) {\r\n        console.log(res)\r\n\r\n        self.chatList = res\r\n        self.chatList.forEach((item) => {\r\n          if (item.messageDirection === 1) {\r\n            item.isMy = true\r\n            item.headUrl = self.userInfo.avatarUrl\r\n          } else {\r\n            item.isMy = false\r\n            item.headUrl = self.avatarUrl\r\n          }\r\n\r\n          self.createImgList(item)\r\n        })\r\n\r\n        // 滚动\r\n        self.toLast = 'item' + self.chatList.length\r\n      }, {\r\n        targetId: this.targetId,\r\n        timestamp: 0\r\n      })\r\n    },\r\n\r\n    createImgList(item) {\r\n      if (item.content.messageName === 'ImageMessage') {\r\n        this.imgList.push(item.content.imageUri)\r\n      }\r\n    },\r\n\r\n    handleLoadMone() {\r\n      const self = this\r\n      console.log('拉取更多')\r\n      console.log(this.chatList[0].sentTime)\r\n\r\n      app.globalData.Services.Message.getHistory(function(res) {\r\n        console.log(res)\r\n        res = res.reverse()\r\n\r\n        res.forEach((item) => {\r\n          if (item.messageDirection === 1) {\r\n            item.isMy = true\r\n            item.headUrl = self.userInfo.avatarUrl\r\n          } else {\r\n            item.isMy = false\r\n            item.headUrl = self.avatarUrl\r\n          }\r\n          self.chatList.unshift(item)\r\n          self.createImgList(item)\r\n        })\r\n\r\n        // 滚动\r\n        self.toLast = 'item' + 15\r\n        console.log(self.toLast)\r\n      }, {\r\n        targetId: this.targetId,\r\n        timestamp: this.chatList[0].sentTime\r\n      })\r\n    },\r\n\r\n    // 发生文本消息\r\n    handleSendMsgFunc(info) {\r\n      const self = this\r\n\r\n      self.imCheckOnline(this.targetId)\r\n\r\n      // 查询对方用户信息\r\n      self.$http.imUserGet({\r\n        id: this.targetId\r\n      }).then(result => {\r\n        app.globalData.Services.Message.sendText(function(res) {\r\n          if (res.messageDirection === 1) {\r\n            res.isMy = true\r\n            res.headUrl = self.userInfo.avatarUrl\r\n          } else {\r\n            res.isMy = false\r\n            res.headUrl = self.avatarUrl\r\n          }\r\n          self.chatList.push(res)\r\n          self.createImgList(res)\r\n\r\n          // 滚动\r\n          self.toLast = 'item' + self.chatList.length\r\n        }, {\r\n          targetId: self.targetId,\r\n          content: info\r\n        }, {\r\n          id: result.data.userId,\r\n          portrait: result.data.userPortrait,\r\n          name: result.data.userName,\r\n          meid: self.userInfo.userId,\r\n          meportrait: self.userInfo.avatarUrl,\r\n          mename: self.userInfo.nickName\r\n        })\r\n      })\r\n    },\r\n\r\n    imCheckOnline(id) {\r\n      const self = this\r\n\r\n      self.$http\r\n        .imCheckOnline({\r\n          id\r\n        })\r\n        .then(res => {\r\n          console.log('是否在线')\r\n          if (res.data.status !== '1') {\r\n            console.log('对方不在线')\r\n            self.$http\r\n              .sendSubscribeMsg({\r\n                toUserId: id,\r\n                message: '你有一条新消息！'\r\n              })\r\n              .then(res => {\r\n                console.log('小程序订阅消息发送成功')\r\n              })\r\n              .catch(err => {\r\n                console.log(err)\r\n              })\r\n          } else {\r\n            console.log('对方在线')\r\n          }\r\n        })\r\n        .catch(err => {\r\n          console.log(err)\r\n        })\r\n    },\r\n\r\n    // 发送图片消息\r\n    handleSendImgMsgFunc(imgUrl) {\r\n      const self = this\r\n\r\n      self.imCheckOnline(this.targetId)\r\n\r\n      // 查询对方用户信息\r\n      self.$http.imUserGet({\r\n        id: this.targetId\r\n      }).then(result => {\r\n        app.globalData.Services.Message.sendImage(function(res) {\r\n          if (res.messageDirection === 1) {\r\n            res.isMy = true\r\n            res.headUrl = self.userInfo.avatarUrl\r\n          } else {\r\n            res.isMy = false\r\n            res.headUrl = self.avatarUrl\r\n          }\r\n          self.chatList.push(res)\r\n          self.createImgList(res)\r\n\r\n          // 滚动\r\n          self.toLast = 'item' + self.chatList.length\r\n        }, {\r\n          targetId: self.targetId,\r\n          url: imgUrl\r\n        }, {\r\n          id: result.data.userId,\r\n          portrait: result.data.userPortrait,\r\n          name: result.data.userName,\r\n          meid: self.userInfo.userId,\r\n          meportrait: self.userInfo.avatarUrl,\r\n          mename: self.userInfo.nickName\r\n        })\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n","import mod from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chat.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuilderX.2.6.1.20200226.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0b5c764b')) {\n      api.createRecord('0b5c764b', component.options)\n    } else {\n      api.reload('0b5c764b', component.options)\n    }\n    \n  }\n}\ncomponent.options.__file = \"E:/xiaochengxu/v2.2.3/App.vue\"\nexport default component.exports"],"sourceRoot":""}