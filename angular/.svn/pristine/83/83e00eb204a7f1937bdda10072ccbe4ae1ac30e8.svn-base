<div class="staff-list">
  <div class="list-head">
    <div class="search-bar">
      <input nz-input placeholder="请输入员工姓名/帐号/手机号" [(ngModel)]="searchInfo"/>
      <button nz-button [nzType]="'primary'" (click)="changeData(true)">查询</button>
    </div>
  </div>
  <div class="list-group-rev">
    <div class="list-quick">
      <div class="list-quick-title">快速查询</div>
      <rev-depart-tree [type]="departType" (handleChangeData)="selectDepart($event)"></rev-depart-tree>
    </div>
    <div class="list-items">
      <nz-table #nzTable [nzData]="staffList" [nzBordered]="true" [nzFrontPagination]="false"
                [(nzPageIndex)]='pageNo' [(nzPageSize)]="pageSize" [nzTotal]="total"
                (nzPageIndexChange)='changeData()' nzSize="middle" [nzShowPagination]='true'
      >
        <thead nz-thead>
          <tr>
            <th>姓名</th>
            <th nz-th><span>账号</span></th>
            <th nz-th><span>工号</span></th>
            <th nz-th><span>手机号</span></th>
            <th nz-th><span>性别</span></th>
            <th nz-th><span>部门</span></th>
            <th nz-th><span>职位</span></th>
            <th nz-th><span>员工状态</span></th>
            <th nz-th><span>备注</span></th>
            <th nz-th><span>操作</span></th>
          </tr>
        </thead>
        <tbody nz-tbody>
          <tr *ngFor="let data of nzTable.data;let i = index">
            <td [title]="data.name" class="w2">{{data.name?data.name:'--'}}</td>
            <td nz-td title="{{data.account?data.account:'--'}}">{{data.account?data.account:'--'}}</td>
            <td nz-td title="{{data.empNo?data.empNo:'--'}}">{{data.empNo?data.empNo:'--'}}</td>
            <td nz-td title="{{data.phone?data.phone:'--'}}">{{data.phone?data.phone:'--'}}</td>
            <td nz-td [ngSwitch]="data.sex" class="w1">
              <span *ngSwitchCase="0">女</span>
              <span *ngSwitchCase="1">男</span>
              <span *ngSwitchDefault>----</span>
            </td>
            <td nz-td title="{{data.departmentName?data.departmentName:'--'}}">{{data.departmentName?data.departmentName:'--'}}</td>
            <td nz-td title="{{data.positionName?data.positionName:''}}" class="w3" >{{data.positionName?data.positionName:'--'}}</td>
            <td nz-td [ngSwitch]="data.state" class="w2">
              <span *ngSwitchCase="0">在职</span>
              <span *ngSwitchCase="1">离职</span>
              <span *ngSwitchCase="2">删除</span>
              <span *ngSwitchDefault>----</span>
            </td>
            <td nz-td><nz-tooltip [nzTitle]="data.remarks"><span nz-tooltip>{{data.remarks | MaxPipe}}</span></nz-tooltip></td>
            <td nz-td>
              <div>
                  <a href="javascript:void(0)" class="work_a" *ngIf="data.state != 1"[routerLink]="['../wechat']"
                  [queryParams]="{id:btoa(data.id)}"
                  >微信通知</a>
                <a href="javascript:void(0)" class="work_a" *ngIf="data.state != 1"
                   (click)="quitStaff(data.id)">离职</a>
                <a href="javascript:void(0)" class="work_a" *ngIf="data.state == 1" nz-popconfirm
                   nzTitle="删除员工账号后，该账号将无法登录" nzOkText="删除" nzCancelText="取消"
                   (nzOnConfirm)="delStaff(data.id)">删除</a>
                <a class="work_a" href="javascript:void(0)" [routerLink]="['./../add']"
                [queryParams]="{id:btoa(data.id)}"
                   *ngIf="data && data.state == 0">修改</a>
              </div>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </div>
  </div>
</div>

