{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{KkMR:function(t,e){t.exports=\".rev-img-cropper {\\n  width: 80%;\\n  height: 100%;\\n  float: left; }\\n\\n.rev-img-cnt {\\n  width: 19%;\\n  height: 100%;\\n  float: right;\\n  font-size: 12px;\\n  overflow: hidden; }\\n\\n.rev-img-cnt .error {\\n    font-size: 12px;\\n    text-align: center; }\\n\\n.rev-img-cnt .rev-img-btn {\\n    width: 100%;\\n    height: 30px;\\n    line-height: 30px;\\n    text-align: center;\\n    position: relative; }\\n\\n.rev-img-cnt .rev-img-btn input[type=file] {\\n      position: absolute;\\n      left: 0;\\n      top: 0;\\n      width: 100%;\\n      height: 100%;\\n      opacity: 0;\\n      z-index: 10; }\\n\\n.rev-img-cnt .rev-img-btn button[type=button] {\\n      width: 100%; }\\n\\n.rev-img-cnt .rev-img-show {\\n    width: 100px;\\n    height: 100px;\\n    overflow: hidden;\\n    text-align: center;\\n    margin: 10px 0; }\\n\\n.rev-img-cnt .rev-img-show img {\\n      max-width: 100%;\\n      max-height: 100%; }\\n\\n#canvas {\\n  display: none; }\\n\"},MTXN:function(t,e,i){\"use strict\";i.d(e,\"a\",function(){return g});var o=i(\"CcnG\"),n=i(\"4GxJ\"),s=i(\"QGg8\"),r=i(\"OHOg\"),a=i(\"f8yE\"),h=i(\"lcOY\"),c=function(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r},p=function(t,e){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(t,e)},g=function(){function t(t,e){this.activeModal=t,this.request=e,this.cropperWidth=0,this.cropperHeight=0,this.MAX_WIDTH=800,this.MAX_HEIGHT=800,this.isClick=!1,this.cropperSettings=new s.a,this.cropperSettings.minWidth=10,this.cropperSettings.minHeight=10,this.cropperSettings.keepAspect=!1,this.cropperSettings.minWithRelativeToResolution=!0,this.cropperSettings.preserveSize=!0,this.cropperSettings.canvasWidth=480,this.cropperSettings.canvasHeight=300,this.cropperSettings.croppedWidth=this.cropperWidth?this.cropperWidth:this.cropperSettings.canvasWidth,this.cropperSettings.croppedHeight=this.cropperHeight?this.cropperHeight:this.cropperSettings.canvasHeight,this.cropperSettings.cropperDrawSettings.strokeColor=\"rgba(11,112,175,0.5)\",this.cropperSettings.cropperDrawSettings.strokeWidth=1,this.cropperSettings.compressRatio=1,this.cropperSettings.noFileInput=!0,this.cropperSettings.touchRadius=20,this.data={}}return t.prototype.ngOnInit=function(){this.name=this.name?this.name:h.a.NAME.UPLOAD_IMG},t.prototype.fileChangeListener=function(t){var e=this,i=new Image,o=t.target.files[0],n=new FileReader;if(Math.ceil(o.size/1024)>102400)return e.showMsg(a.a.UPLOAD.IMG_MAX),void(t.target.value=\"\");n.onload=function(t){i.src=t.target.result,e.cropper.setImage(i)},n.readAsDataURL(o)},t.prototype.cropped=function(t){this.cropperHeight=t.bottom-t.top,this.cropperWidth=t.right-t.left},t.prototype.onClickImage=function(){var t=this;if(t.data.image){t.isClick=!0;var e=new Image;e.src=t.data.image,e.onload=function(){this.height>t.MAX_HEIGHT&&(this.width*=t.MAX_HEIGHT/this.height,this.height=t.MAX_HEIGHT),this.width>t.MAX_WIDTH&&(this.height*=t.MAX_WIDTH/this.width,this.width=t.MAX_WIDTH);var i=document.getElementById(\"canvas\");i.width=this.width,i.height=this.height;var o=i.getContext(\"2d\");o.clearRect(0,0,i.width,i.height),o.drawImage(e,0,0,this.width,this.height),t.data.image=i.toDataURL(\"image/png\",.5),t.request.doPostImg({url:\"token\",success:function(e){if(e&&200==e.code){var i=JSON.parse(e.data).uptoken,o=JSON.parse(e.data).url;t.request.doPostQiniu({token:i,url:o,img:t.data.image,success:function(e){t.isClick=!1,e&&e.key?t.activeModal.close({image:o+\"/\"+e.key}):t.showMsg(a.a.UPLOAD.FAIL)},error:function(e){e&&(t.isClick=!1,t.showMsg(a.a.UPLOAD.NET_BUSY))}})}else t.isClick=!1,t.showMsg(a.a.UPLOAD.NOT_AUTH)}})}}else t.showMsg(a.a.UPLOAD.EMPTY)},t.prototype.showMsg=function(t){var e=this;this.msg=t,setTimeout(function(){e.msg=null},2e3)},c([Object(o.F)(),p(\"design:type\",String)],t.prototype,\"name\",void 0),c([Object(o.F)(),p(\"design:type\",Number)],t.prototype,\"width\",void 0),c([Object(o.F)(),p(\"design:type\",Number)],t.prototype,\"height\",void 0),c([Object(o.Oa)(\"cropper\",void 0),p(\"design:type\",s.b)],t.prototype,\"cropper\",void 0),t=c([Object(o.n)({selector:\"rev-uploader\",template:i(\"jY6i\"),styles:[i(\"KkMR\")]}),p(\"design:paramtypes\",[n.a,r.a])],t)}()},QGg8:function(t,e,i){\"use strict\";var o,n=i(\"Ip0R\"),s=i(\"CcnG\"),r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return Object.defineProperty(t.prototype,\"next\",{get:function(){return this._next},set:function(t){this._next=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"prev\",{get:function(){return this._prev},set:function(t){this._prev=t},enumerable:!0,configurable:!0}),t}(),a=function(){function t(e){t._instance=this;for(var i=this.firstAvailable=new r,o=1;o<e;o++){var n=new r;i.next=n,i=n}}return Object.defineProperty(t,\"instance\",{get:function(){return t._instance},enumerable:!0,configurable:!0}),t.prototype.borrow=function(t,e){if(null==this.firstAvailable)throw\"Pool exhausted\";this.borrowed++;var i=this.firstAvailable;return this.firstAvailable=i.next,i.x=t,i.y=e,i},t.prototype.returnPoint=function(t){this.borrowed--,t.x=0,t.y=0,t.next=this.firstAvailable,this.firstAvailable=t},t}(),h=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.left=t,this.right=t+i,this.top=e,this.bottom=e+o}return Object.defineProperty(t.prototype,\"width\",{get:function(){return this.right-this.left},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"height\",{get:function(){return this.bottom-this.top},enumerable:!0,configurable:!0}),t.prototype.getCentre=function(){var t=this.width,e=this.height;return a.instance.borrow(this.left+t/2,this.top+e/2)},t}(),c=function(){return function(t){this.lineDash=!1,this.strokeWidth=1,this.strokeColor=\"rgba(255,255,255,1)\",this.dragIconStrokeWidth=1,this.dragIconStrokeColor=\"rgba(0,0,0,1)\",this.dragIconFillColor=\"rgba(255,255,255,1)\",\"object\"==typeof t&&(this.lineDash=t.lineDash||this.lineDash,this.strokeWidth=t.strokeWidth||this.strokeWidth,this.strokeColor=t.strokeColor||this.strokeColor,this.dragIconStrokeWidth=t.dragIconStrokeWidth||this.dragIconStrokeWidth,this.dragIconStrokeColor=t.dragIconStrokeColor||this.dragIconStrokeColor,this.dragIconFillColor=t.dragIconFillColor||this.dragIconFillColor)}}(),p=function(){function t(t){this.canvasWidth=300,this.canvasHeight=300,this.dynamicSizing=!1,this.width=200,this.height=200,this.minWidth=50,this.minHeight=50,this.minWithRelativeToResolution=!0,this.croppedWidth=100,this.croppedHeight=100,this.cropperDrawSettings=new c,this.touchRadius=20,this.noFileInput=!1,this.markerSizeMultiplier=1,this.centerTouchRadius=20,this.showCenterMarker=!0,this.allowedFilesRegex=/\\.(jpe?g|png|gif|bmp)$/i,this.cropOnResize=!0,this.preserveSize=!1,this.compressRatio=1,this._rounded=!1,this._keepAspect=!0,\"object\"==typeof t&&Object.assign(this,t)}return Object.defineProperty(t.prototype,\"rounded\",{get:function(){return this._rounded},set:function(t){this._rounded=t,t&&(this._keepAspect=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"keepAspect\",{get:function(){return this._keepAspect},set:function(t){this._keepAspect=t,!0===this._rounded&&!1===this._keepAspect&&(console.error(\"Cannot set keep aspect to false on rounded cropper. Ellipsis not supported\"),this._keepAspect=!0)},enumerable:!0,configurable:!0}),t}(),g=function(){function t(t,e,i,o){this.cropperSettings=new p,this.over=!1,this.drag=!1,this._position=new r(t,e),this.offset=new r(0,0),this.radius=i,this.cropperSettings=o}return t.prototype.setDrag=function(t){this.drag=t,this.setOver(t)},t.prototype.draw=function(t){},t.prototype.setOver=function(t){this.over=t},t.prototype.touchInBounds=function(t,e){return t>this.position.x-this.radius+this.offset.x&&t<this.position.x+this.radius+this.offset.x&&e>this.position.y-this.radius+this.offset.y&&e<this.position.y+this.radius+this.offset.y},Object.defineProperty(t.prototype,\"position\",{get:function(){return this._position},enumerable:!0,configurable:!0}),t.prototype.setPosition=function(t,e){this._position.x=t,this._position.y=e},t}(),d=(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),u=function(t){function e(e,i,o,n){return t.call(this,e,i,o,n)||this}return d(e,t),e.prototype.drawCornerBorder=function(t){var e=10;(this.over||this.drag)&&(e=12);var i=this.cropperSettings.markerSizeMultiplier,o=this.cropperSettings.markerSizeMultiplier;if(this.horizontalNeighbour.position.x<this.position.x&&(i=-this.cropperSettings.markerSizeMultiplier),this.verticalNeighbour.position.y<this.position.y&&(o=-this.cropperSettings.markerSizeMultiplier),this.cropperSettings.rounded){var n=this.position.x-this.horizontalNeighbour.position.x,s=this.position.y-this.verticalNeighbour.position.y,r=Math.round(Math.sin(Math.PI/2)*Math.abs(n/2))/4,a=Math.round(Math.sin(Math.PI/2)*Math.abs(s/2))/4;this.offset.x=i>0?r:-r,this.offset.y=o>0?a:-a}else this.offset.x=0,this.offset.y=0;t.beginPath(),this.cropperSettings.cropperDrawSettings.lineDash&&t.setLineDash([1,3]),t.lineJoin=\"miter\",t.moveTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y+e*o),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y+e*o),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.closePath(),t.lineWidth=this.cropperSettings.cropperDrawSettings.strokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.strokeColor||\"rgba(255,255,255,.7)\",t.stroke()},e.prototype.drawCornerFill=function(t){var e=10;(this.over||this.drag)&&(e=12);var i=this.cropperSettings.markerSizeMultiplier,o=this.cropperSettings.markerSizeMultiplier;this.horizontalNeighbour.position.x<this.position.x&&(i=-this.cropperSettings.markerSizeMultiplier),this.verticalNeighbour.position.y<this.position.y&&(o=-this.cropperSettings.markerSizeMultiplier),t.beginPath(),this.cropperSettings.cropperDrawSettings.lineDash&&t.setLineDash([1,3]),t.moveTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y),t.lineTo(this.position.x+this.offset.x+e*i,this.position.y+this.offset.y+e*o),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y+e*o),t.lineTo(this.position.x+this.offset.x,this.position.y+this.offset.y),t.closePath(),t.fillStyle=this.cropperSettings.cropperDrawSettings.strokeColor||\"rgba(255,255,255,.7)\",t.fill()},e.prototype.moveX=function(t){this.setPosition(t,this.position.y)},e.prototype.moveY=function(t){this.setPosition(this.position.x,t)},e.prototype.move=function(t,e){this.setPosition(t,e),this.verticalNeighbour.moveX(t),this.horizontalNeighbour.moveY(e)},e.prototype.addHorizontalNeighbour=function(t){this.horizontalNeighbour=t},e.prototype.addVerticalNeighbour=function(t){this.verticalNeighbour=t},e.prototype.getHorizontalNeighbour=function(){return this.horizontalNeighbour},e.prototype.getVerticalNeighbour=function(){return this.verticalNeighbour},e.prototype.draw=function(t){this.drawCornerFill(t),this.drawCornerBorder(t)},e}(g),l=function(){return function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.id=i,this.x=t,this.y=e}}(),f=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),m=function(t){function e(e,i,o,n){var s=t.call(this,e,i,o,n)||this;return s.iconPoints=[],s.scaledIconPoints=[],s.getDragIconPoints(s.iconPoints,1),s.getDragIconPoints(s.scaledIconPoints,1.2),s}return f(e,t),e.prototype.draw=function(t){this.over||this.drag?this.drawIcon(t,this.scaledIconPoints):this.drawIcon(t,this.iconPoints)},e.prototype.getDragIconPoints=function(t,e){var i=17*e,o=14*e,n=8*e,s=4*e;t.push(a.instance.borrow(-s/2,i-n)),t.push(a.instance.borrow(-o/2,i-n)),t.push(a.instance.borrow(0,i)),t.push(a.instance.borrow(o/2,i-n)),t.push(a.instance.borrow(s/2,i-n)),t.push(a.instance.borrow(s/2,s/2)),t.push(a.instance.borrow(i-n,s/2)),t.push(a.instance.borrow(i-n,o/2)),t.push(a.instance.borrow(i,0)),t.push(a.instance.borrow(i-n,-o/2)),t.push(a.instance.borrow(i-n,-s/2)),t.push(a.instance.borrow(s/2,-s/2)),t.push(a.instance.borrow(s/2,-i+n)),t.push(a.instance.borrow(o/2,-i+n)),t.push(a.instance.borrow(0,-i)),t.push(a.instance.borrow(-o/2,-i+n)),t.push(a.instance.borrow(-s/2,-i+n)),t.push(a.instance.borrow(-s/2,-s/2)),t.push(a.instance.borrow(-i+n,-s/2)),t.push(a.instance.borrow(-i+n,-o/2)),t.push(a.instance.borrow(-i,0)),t.push(a.instance.borrow(-i+n,o/2)),t.push(a.instance.borrow(-i+n,s/2)),t.push(a.instance.borrow(-s/2,s/2))},e.prototype.drawIcon=function(t,e){if(this.cropperSettings.showCenterMarker){t.beginPath(),t.moveTo(e[0].x+this.position.x,e[0].y+this.position.y);for(var i=0;i<e.length;i++){var o=e[i];t.lineTo(o.x+this.position.x,o.y+this.position.y)}t.closePath(),t.fillStyle=this.cropperSettings.cropperDrawSettings.dragIconFillColor,t.fill(),t.lineWidth=this.cropperSettings.cropperDrawSettings.dragIconStrokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.dragIconStrokeColor,t.stroke()}},e.prototype.recalculatePosition=function(t){var e=t.getCentre();this.setPosition(e.x,e.y),a.instance.returnPoint(e)},e}(g),v=function(){return function(){}}(),y=function(){function t(){}return t.setPressed=function(t){this.pressed=t},t.setReleased=function(t){this.pressed},t.setOver=function(t){this.over=t},t.setStyle=function(t,e){void 0!==this.pressed?this.pressed:this.over},t.share={},t}(),w=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),b=function(t){function e(e){var i=t.call(this)||this,o=e.width,n=e.height,s=e.keepAspect,r=e.touchRadius,h=e.centerTouchRadius,c=e.minWidth,p=e.minHeight,g=e.croppedWidth,d=e.croppedHeight;return i.cropperSettings=e,i.crop=i,i.x=0,i.y=0,i.canvasHeight=e.canvasHeight,i.canvasWidth=e.canvasWidth,i.width=o,void 0===o&&(i.width=100),i.height=n,void 0===n&&(i.height=50),i.keepAspect=s,void 0===s&&(i.keepAspect=!0),i.touchRadius=r,void 0===r&&(i.touchRadius=20),i.minWidth=c,i.minHeight=p,i.aspectRatio=0,i.currentDragTouches=[],i.isMouseDown=!1,i.ratioW=1,i.ratioH=1,i.fileType=e.fileType,i.imageSet=!1,i.pointPool=new a(200),i.tl=new u(0,0,r,i.cropperSettings),i.tr=new u(0+o,0,r,i.cropperSettings),i.bl=new u(0,0+n,r,i.cropperSettings),i.br=new u(0+o,0+n,r,i.cropperSettings),i.tl.addHorizontalNeighbour(i.tr),i.tl.addVerticalNeighbour(i.bl),i.tr.addHorizontalNeighbour(i.tl),i.tr.addVerticalNeighbour(i.br),i.bl.addHorizontalNeighbour(i.br),i.bl.addVerticalNeighbour(i.tl),i.br.addHorizontalNeighbour(i.bl),i.br.addVerticalNeighbour(i.tr),i.markers=[i.tl,i.tr,i.bl,i.br],i.center=new m(0+o/2,0+n/2,h,i.cropperSettings),i.aspectRatio=n/o,i.croppedImage=new Image,i.currentlyInteracting=!1,i.cropWidth=g,i.cropHeight=d,i}return w(e,t),e.sign=function(t){return+t===t?0===t?t:t>0?1:-1:NaN},e.getMousePos=function(t,e){var i=t.getBoundingClientRect();return a.instance.borrow(e.clientX-i.left,e.clientY-i.top)},e.getTouchPos=function(t,e){var i=t.getBoundingClientRect();return a.instance.borrow(e.clientX-i.left,e.clientY-i.top)},e.detectVerticalSquash=function(t){var e=t.height,i=document.createElement(\"canvas\");i.width=1,i.height=e;var o=i.getContext(\"2d\");o.drawImage(t,0,0);var n=o.getImageData(0,0,1,e);if(n){for(var s=n.data,r=0,a=e,h=e;h>r;){0===s[4*(h-1)+3]?a=h:r=h,h=a+r>>1}var c=h/e;return 0===c?1:c}return 1},e.prototype.getDataUriMimeType=function(t){var e=t.substring(0,50),i=\"image/png\",o=RegExp(/^(data:)([\\w\\/\\+]+);(charset=[\\w-]+|base64).*,(.*)/gi).exec(e);return o&&o[2]&&\"image/jpg\"==(i=o[2])&&(i=\"image/jpeg\"),i},e.prototype.prepare=function(t){this.buffer=document.createElement(\"canvas\"),this.cropCanvas=document.createElement(\"canvas\");var e=t.parentElement?t.parentElement.clientWidth:0;e>0&&this.cropperSettings.dynamicSizing?(this.cropCanvas.width=e,this.buffer.width=e,t.width=e):(this.cropCanvas.width=this.cropWidth,this.buffer.width=t.width),this.cropCanvas.height=this.cropHeight,this.buffer.height=t.height,this.canvas=t,this.ctx=this.canvas.getContext(\"2d\"),this.draw(this.ctx)},e.prototype.updateSettings=function(t){this.cropperSettings=t},e.prototype.resizeCanvas=function(t,e,i){void 0===i&&(i=!1),this.canvas.width=this.cropCanvas.width=this.width=this.canvasWidth=this.buffer.width=t,this.canvas.height=this.cropCanvas.height=this.height=this.canvasHeight=this.buffer.height=e,i&&this.setImage(this.srcImage)},e.prototype.reset=function(){this.setImage(void 0)},e.prototype.draw=function(t){var e=this.getBounds();if(this.srcImage){t.clearRect(0,0,this.canvasWidth,this.canvasHeight);var i=this.srcImage.height/this.srcImage.width,o=this.canvasHeight/this.canvasWidth,n=this.canvasWidth,s=this.canvasHeight;o>i?(n=this.canvasWidth,s=this.canvasWidth*i):(s=this.canvasHeight,n=this.canvasHeight/i),this.ratioW=n/this.srcImage.width,this.ratioH=s/this.srcImage.height,o<i?this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,this.buffer.width/2-n/2,0,n,s):this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,0,this.buffer.height/2-s/2,n,s),this.buffer.getContext(\"2d\").drawImage(this.canvas,0,0,this.canvasWidth,this.canvasHeight),t.lineWidth=this.cropperSettings.cropperDrawSettings.strokeWidth,t.strokeStyle=this.cropperSettings.cropperDrawSettings.strokeColor,t.fillStyle=\"rgba(0, 0, 0, 0.6)\",this.cropperSettings.rounded?(t.fillRect(0,0,this.canvas.width,this.canvas.height),t.save(),t.beginPath(),t.arc(e.left+e.width/2,e.top+e.height/2,e.width/2,0,2*Math.PI),t.clip(),o<i?this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,this.buffer.width/2-n/2,0,n,s):this.drawImageIOSFix(t,this.srcImage,0,0,this.srcImage.width,this.srcImage.height,0,this.buffer.height/2-s/2,n,s),t.restore()):(t.fillRect(0,0,this.canvasWidth,this.canvasHeight),t.drawImage(this.buffer,e.left,e.top,Math.max(e.width,1),Math.max(e.height,1),e.left,e.top,e.width,e.height),t.strokeRect(e.left,e.top,e.width,e.height));for(var r=0;r<this.markers.length;r++)this.markers[r].draw(t);this.center.draw(t)}else t.fillStyle=\"rgba(192,192,192,1)\",t.fillRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.dragCenter=function(t,e,i){var o=this.getBounds(),n=t-o.width/2,s=t+o.width/2,r=e-o.height/2,a=e+o.height/2;s>=this.maxXClamp&&(t=this.maxXClamp-o.width/2),n<=this.minXClamp&&(t=o.width/2+this.minXClamp),r<this.minYClamp&&(e=o.height/2+this.minYClamp),a>=this.maxYClamp&&(e=this.maxYClamp-o.height/2),this.tl.moveX(t-o.width/2),this.tl.moveY(e-o.height/2),this.tr.moveX(t+o.width/2),this.tr.moveY(e-o.height/2),this.bl.moveX(t-o.width/2),this.bl.moveY(e+o.height/2),this.br.moveX(t+o.width/2),this.br.moveY(e+o.height/2),i.setPosition(t,e)},e.prototype.enforceMinSize=function(t,e,i){var o=t-i.getHorizontalNeighbour().position.x,n=e-i.getVerticalNeighbour().position.y,s=this.minWidth-Math.abs(o),r=this.minHeight-Math.abs(n);return 0===o||0===n?(t=i.position.x,e=i.position.y,a.instance.borrow(t,e)):(this.keepAspect?s>0&&r/this.aspectRatio>0?s>r/this.aspectRatio?o<0?(t-=s,n<0?e-=s*this.aspectRatio:e+=s*this.aspectRatio):(t+=s,n<0?e-=s*this.aspectRatio:e+=s*this.aspectRatio):n<0?(e-=r,o<0?t-=r/this.aspectRatio:t+=r/this.aspectRatio):(e+=r,o<0?t-=r/this.aspectRatio:t+=r/this.aspectRatio):s>0?o<0?(t-=s,n<0?e-=s*this.aspectRatio:e+=s*this.aspectRatio):(t+=s,n<0?e-=s*this.aspectRatio:e+=s*this.aspectRatio):r>0&&(n<0?(e-=r,o<0?t-=r/this.aspectRatio:t+=r/this.aspectRatio):(e+=r,o<0?t-=r/this.aspectRatio:t+=r/this.aspectRatio)):(s>0&&(o<0?t-=s:t+=s),r>0&&(n<0?e-=r:e+=r)),(t<this.minXClamp||t>this.maxXClamp||e<this.minYClamp||e>this.maxYClamp)&&(t=i.position.x,e=i.position.y),a.instance.borrow(t,e))},e.prototype.dragCorner=function(t,e,i){var o,n=0,s=0,r=0,h=0,c=0,p=0,g=0,d=0,u=0;if(this.keepAspect){if(r=(o=i.getHorizontalNeighbour().getVerticalNeighbour()).position.x,h=o.position.y,t<=o.position.x){if(e<=o.position.y){if(n=r-100/this.aspectRatio,s=h-100/this.aspectRatio*this.aspectRatio,(u=this.getSide(a.instance.borrow(n,s),o.position,a.instance.borrow(t,e)))>0){p=(c=Math.abs(o.position.y-e))/this.aspectRatio,g=o.position.y-c,d=o.position.x-p;var l=this.enforceMinSize(d,g,i);i.move(l.x,l.y),a.instance.returnPoint(l)}else if(u<0){c=(p=Math.abs(o.position.x-t))*this.aspectRatio,g=o.position.y-c,d=o.position.x-p;l=this.enforceMinSize(d,g,i);i.move(l.x,l.y),a.instance.returnPoint(l)}}else if(n=r-100/this.aspectRatio,s=h+100/this.aspectRatio*this.aspectRatio,(u=this.getSide(a.instance.borrow(n,s),o.position,a.instance.borrow(t,e)))>0){c=(p=Math.abs(o.position.x-t))*this.aspectRatio,g=o.position.y+c,d=o.position.x-p;l=this.enforceMinSize(d,g,i);i.move(l.x,l.y),a.instance.returnPoint(l)}else if(u<0){p=(c=Math.abs(o.position.y-e))/this.aspectRatio,g=o.position.y+c,d=o.position.x-p;l=this.enforceMinSize(d,g,i);i.move(l.x,l.y),a.instance.returnPoint(l)}}else if(e<=o.position.y){if(n=r+100/this.aspectRatio,s=h-100/this.aspectRatio*this.aspectRatio,(u=this.getSide(a.instance.borrow(n,s),o.position,a.instance.borrow(t,e)))<0){p=(c=Math.abs(o.position.y-e))/this.aspectRatio,g=o.position.y-c,d=o.position.x+p;l=this.enforceMinSize(d,g,i);i.move(l.x,l.y),a.instance.returnPoint(l)}else if(u>0){c=(p=Math.abs(o.position.x-t))*this.aspectRatio,g=o.position.y-c,d=o.position.x+p;l=this.enforceMinSize(d,g,i);i.move(l.x,l.y),a.instance.returnPoint(l)}}else if(n=r+100/this.aspectRatio,s=h+100/this.aspectRatio*this.aspectRatio,(u=this.getSide(a.instance.borrow(n,s),o.position,a.instance.borrow(t,e)))<0){c=(p=Math.abs(o.position.x-t))*this.aspectRatio,g=o.position.y+c,d=o.position.x+p;l=this.enforceMinSize(d,g,i);i.move(l.x,l.y),a.instance.returnPoint(l)}else if(u>0){p=(c=Math.abs(o.position.y-e))/this.aspectRatio,g=o.position.y+c,d=o.position.x+p;l=this.enforceMinSize(d,g,i);i.move(l.x,l.y),a.instance.returnPoint(l)}}else{l=this.enforceMinSize(t,e,i);i.move(l.x,l.y),a.instance.returnPoint(l)}this.center.recalculatePosition(this.getBounds())},e.prototype.getSide=function(t,i,o){var n=e.sign((i.x-t.x)*(o.y-t.y)-(i.y-t.y)*(o.x-t.x));return a.instance.returnPoint(t),a.instance.returnPoint(o),n},e.prototype.handleRelease=function(t){if(null!=t){for(var e=0,i=0;i<this.currentDragTouches.length;i++)t.id===this.currentDragTouches[i].id&&(this.currentDragTouches[i].dragHandle.setDrag(!1),e=i);this.currentDragTouches.splice(e,1),this.draw(this.ctx)}},e.prototype.handleMove=function(t){for(var e=!1,i=0;i<this.currentDragTouches.length;i++)if(t.id===this.currentDragTouches[i].id&&null!=this.currentDragTouches[i].dragHandle){var o=this.currentDragTouches[i],n=this.clampPosition(t.x-o.dragHandle.offset.x,t.y-o.dragHandle.offset.y);t.x=n.x,t.y=n.y,a.instance.returnPoint(n),o.dragHandle instanceof u?this.dragCorner(t.x,t.y,o.dragHandle):this.dragCenter(t.x,t.y,o.dragHandle),this.currentlyInteracting=!0,e=!0,y.setPressed(this.canvas);break}if(!e){for(var s=0;s<this.markers.length;s++){var r=this.markers[s];if(r.touchInBounds(t.x,t.y)){t.dragHandle=r,this.currentDragTouches.push(t),r.setDrag(!0),t.dragHandle.offset.x=t.x-t.dragHandle.position.x,t.dragHandle.offset.y=t.y-t.dragHandle.position.y,this.dragCorner(t.x-t.dragHandle.offset.x,t.y-t.dragHandle.offset.y,t.dragHandle);break}}null!==t.dragHandle&&void 0!==t.dragHandle||this.center.touchInBounds(t.x,t.y)&&(t.dragHandle=this.center,this.currentDragTouches.push(t),t.dragHandle.setDrag(!0),t.dragHandle.offset.x=t.x-t.dragHandle.position.x,t.dragHandle.offset.y=t.y-t.dragHandle.position.y,this.dragCenter(t.x-t.dragHandle.offset.x,t.y-t.dragHandle.offset.y,t.dragHandle))}},e.prototype.updateClampBounds=function(){var t=this.srcImage.height/this.srcImage.width,e=this.canvas.height/this.canvas.width,i=this.canvas.width,o=this.canvas.height;e>t?(i=this.canvas.width,o=this.canvas.width*t):(o=this.canvas.height,i=this.canvas.height/t),this.minXClamp=this.canvas.width/2-i/2,this.minYClamp=this.canvas.height/2-o/2,this.maxXClamp=this.canvas.width/2+i/2,this.maxYClamp=this.canvas.height/2+o/2},e.prototype.getCropBounds=function(){var t=this.getBounds();return t.top=Math.round((t.top-this.minYClamp)/this.ratioH),t.bottom=Math.round((t.bottom-this.minYClamp)/this.ratioH),t.left=Math.round((t.left-this.minXClamp)/this.ratioW),t.right=Math.round((t.right-this.minXClamp)/this.ratioW),t},e.prototype.clampPosition=function(t,e){return t<this.minXClamp&&(t=this.minXClamp),t>this.maxXClamp&&(t=this.maxXClamp),e<this.minYClamp&&(e=this.minYClamp),e>this.maxYClamp&&(e=this.maxYClamp),a.instance.borrow(t,e)},e.prototype.isImageSet=function(){return this.imageSet},e.prototype.setImage=function(t){if(this.srcImage=t,t){this.imageSet=!0,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.buffer.getContext(\"2d\").clearRect(0,0,this.buffer.width,this.buffer.height),this.cropperSettings.fileType||(this.fileType=this.getDataUriMimeType(t.src)),this.cropperSettings.minWithRelativeToResolution&&(this.minWidth=this.canvas.width*this.cropperSettings.minWidth/this.srcImage.width,this.minHeight=this.canvas.height*this.cropperSettings.minHeight/this.srcImage.height),this.updateClampBounds(),this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height;var e=this.getCropPositionFromMarkers();this.setCropPosition(e)}else this.imageSet=!1,this.draw(this.ctx)},e.prototype.updateCropPosition=function(t){var e=this.getCropPositionFromBounds(t);this.setCropPosition(e)},e.prototype.setCropPosition=function(t){this.tl.setPosition(t[0].x,t[0].y),this.tr.setPosition(t[1].x,t[1].y),this.bl.setPosition(t[2].x,t[2].y),this.br.setPosition(t[3].x,t[3].y),this.center.setPosition(t[4].x,t[4].y);for(var i=0,o=t;i<o.length;i++){var n=o[i];a.instance.returnPoint(n)}this.vertSquashRatio=e.detectVerticalSquash(this.srcImage),this.draw(this.ctx),this.croppedImage=this.getCroppedImageHelper(!1,this.cropWidth,this.cropHeight)},e.prototype.getCropPositionFromMarkers=function(){var t,e,i,o,n=this.canvas.width,s=this.canvas.height,r=this.srcImage.height/this.srcImage.width,h=this.getBounds(),c=h.height/h.width,p=this.canvas.width/2,g=this.canvas.height/2;if(c>r){var d=Math.min(n*r,s),u=d/c;t=a.instance.borrow(p-u/2,g+d/2),e=a.instance.borrow(p+u/2,g+d/2),i=a.instance.borrow(p-u/2,g-d/2),o=a.instance.borrow(p+u/2,g-d/2)}else{var l=Math.min(s/r,n),f=l*c;t=a.instance.borrow(p-l/2,g+f/2),e=a.instance.borrow(p+l/2,g+f/2),i=a.instance.borrow(p-l/2,g-f/2),o=a.instance.borrow(p+l/2,g-f/2)}return[t,e,i,o,a.instance.borrow(p,g)]},e.prototype.getCropPositionFromBounds=function(t){var e=0,i=0,o=this.canvasHeight/this.canvasWidth,n=this.srcImage.height/this.srcImage.width;o>n?e=this.buffer.height/2-this.canvasWidth*n/2:i=this.buffer.width/2-this.canvasHeight/n/2;var s=(this.canvasWidth-2*i)/this.srcImage.width,r=(this.canvasHeight-2*e)/this.srcImage.height,h=t.height*r,c=t.width*s,p=t.left*s+i,g=t.top*r+e;if(this.keepAspect){var d=h/this.aspectRatio,u=c*this.aspectRatio;this.getCropBounds().height===t.height?h=u:this.getCropBounds().width===t.width?c=d:Math.abs(u-h)<Math.abs(d-c)?c=d:h=u}return[a.instance.borrow(p,g+h),a.instance.borrow(p+c,g+h),a.instance.borrow(p,g),a.instance.borrow(p+c,g),a.instance.borrow(p+c/2,g+h/2)]},e.prototype.getCroppedImageHelper=function(t,e,i){return this.cropperSettings.cropOnResize?this.getCroppedImage(t,e,i):this.croppedImage?this.croppedImage:document.createElement(\"img\")},e.prototype.getCroppedImage=function(t,e,i){var o=this.getBounds();if(this.srcImage){var n=this.srcImage.height/this.srcImage.width,s=this.canvas.height/this.canvas.width,r=this.canvas.width,a=this.canvas.height;s>n?(r=this.canvas.width,a=this.canvas.width*n):s<n?(a=this.canvas.height,r=this.canvas.height/n):(a=this.canvas.height,r=this.canvas.width),this.ratioW=r/this.srcImage.width,this.ratioH=a/this.srcImage.height;var h=(this.buffer.height-a)/2/this.ratioH,c=(this.buffer.width-r)/2/this.ratioW,p=this.cropCanvas.getContext(\"2d\");if(this.cropperSettings.preserveSize||t){var g=Math.round(o.right/this.ratioW-o.left/this.ratioW),d=Math.round(o.bottom/this.ratioH-o.top/this.ratioH);this.cropCanvas.width=g,this.cropCanvas.height=d,this.cropperSettings.croppedWidth=this.cropCanvas.width,this.cropperSettings.croppedHeight=this.cropCanvas.height}else this.cropCanvas.width=this.cropWidth,this.cropCanvas.height=this.cropHeight;return p.clearRect(0,0,this.cropCanvas.width,this.cropCanvas.height),this.drawImageIOSFix(p,this.srcImage,Math.max(Math.round(o.left/this.ratioW-c),0),Math.max(Math.round(o.top/this.ratioH-h),0),Math.max(Math.round(o.width/this.ratioW),1),Math.max(Math.round(o.height/this.ratioH),1),0,0,this.cropCanvas.width,this.cropCanvas.height),this.cropperSettings.resampleFn&&this.cropperSettings.resampleFn(this.cropCanvas),this.croppedImage.width=this.cropCanvas.width,this.croppedImage.height=this.cropCanvas.height,this.croppedImage.src=this.cropCanvas.toDataURL(this.fileType,this.cropperSettings.compressRatio),this.croppedImage}return document.createElement(\"img\")},e.prototype.getBounds=function(){for(var t=Number.MAX_VALUE,e=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=-Number.MAX_VALUE,n=0;n<this.markers.length;n++){var s=this.markers[n];s.position.x<t&&(t=s.position.x),s.position.x>i&&(i=s.position.x),s.position.y<e&&(e=s.position.y),s.position.y>o&&(o=s.position.y)}var r=new h;return r.left=t,r.right=i,r.top=e,r.bottom=o,r},e.prototype.setBounds=function(t){for(var e=this.getBounds(),i=0;i<this.markers.length;i++){var o=this.markers[i];o.position.x===e.left?o.position.y===e.top?o.setPosition(t.left,t.top):o.setPosition(t.left,t.bottom):o.position.y===e.top?o.setPosition(t.right,t.top):o.setPosition(t.right,t.bottom)}this.center.recalculatePosition(t),this.center.draw(this.ctx),this.draw(this.ctx)},e.prototype.onTouchMove=function(t){if(this.crop.isImageSet()){if(1===t.touches.length){if(this.isMouseDown){t.preventDefault();for(var i=0;i<t.touches.length;i++){var o=t.touches[i],n=e.getTouchPos(this.canvas,o),s=new l(n.x,n.y,o.identifier);a.instance.returnPoint(n),this.move(s)}}}else if(2===t.touches.length){t.preventDefault();var r=(t.touches[0].clientX-t.touches[1].clientX)*(t.touches[0].clientX-t.touches[1].clientX)+(t.touches[0].clientY-t.touches[1].clientY)*(t.touches[0].clientY-t.touches[1].clientY);if(this.previousDistance&&this.previousDistance!==r){var h=this.getBounds();r<this.previousDistance&&(h.top+=1,h.left+=1,h.right-=1,h.bottom-=1),r>this.previousDistance&&(h.top!==this.minYClamp&&h.bottom!==this.maxYClamp&&h.left!==this.minXClamp&&h.right!==this.maxXClamp?(h.top-=1,h.left-=1,h.right+=1,h.bottom+=1):h.top!==this.minYClamp&&h.bottom!==this.maxYClamp&&h.left===this.minXClamp&&h.right!==this.maxXClamp?(h.top-=1,h.right+=2,h.bottom+=1):h.top!==this.minYClamp&&h.bottom!==this.maxYClamp&&h.left!==this.minXClamp&&h.right===this.maxXClamp?(h.top-=1,h.left-=2,h.bottom+=1):h.top===this.minYClamp&&h.bottom!==this.maxYClamp&&h.left!==this.minXClamp&&h.right!==this.maxXClamp?(h.left-=1,h.right+=1,h.bottom+=2):h.top!==this.minYClamp&&h.bottom===this.maxYClamp&&h.left!==this.minXClamp&&h.right!==this.maxXClamp?(h.top-=2,h.left-=1,h.right+=1):h.top===this.minYClamp&&h.bottom!==this.maxYClamp&&h.left===this.minXClamp&&h.right!==this.maxXClamp?(h.right+=2,h.bottom+=2):h.top===this.minYClamp&&h.bottom!==this.maxYClamp&&h.left!==this.minXClamp&&h.right===this.maxXClamp?(h.left-=2,h.bottom+=2):h.top!==this.minYClamp&&h.bottom===this.maxYClamp&&h.left===this.minXClamp&&h.right!==this.maxXClamp?(h.top-=2,h.right+=2):h.top!==this.minYClamp&&h.bottom===this.maxYClamp&&h.left!==this.minXClamp&&h.right===this.maxXClamp&&(h.top-=2,h.left-=2)),h.top<this.minYClamp&&(h.top=this.minYClamp),h.bottom>this.maxYClamp&&(h.bottom=this.maxYClamp),h.left<this.minXClamp&&(h.left=this.minXClamp),h.right>this.maxXClamp&&(h.right=this.maxXClamp),this.setBounds(h)}this.previousDistance=r}this.draw(this.ctx)}},e.prototype.onMouseMove=function(t){if(this.crop.isImageSet()&&this.isMouseDown){var i=e.getMousePos(this.canvas,t);this.move(new l(i.x,i.y,0));var o=this.getDragTouchForID(0);o?(o.x=i.x,o.y=i.y):o=new l(i.x,i.y,0),a.instance.returnPoint(i),this.drawCursors(o),this.draw(this.ctx)}},e.prototype.move=function(t){this.isMouseDown&&this.handleMove(t)},e.prototype.getDragTouchForID=function(t){for(var e=0;e<this.currentDragTouches.length;e++)if(t===this.currentDragTouches[e].id)return this.currentDragTouches[e]},e.prototype.drawCursors=function(t){var e=!1;null!=t&&(t.dragHandle===this.center&&(y.setStyle(this.canvas,\"move\"),e=!0),null!==t.dragHandle&&t.dragHandle instanceof u&&(this.drawCornerCursor(t.dragHandle,t.dragHandle.position.x,t.dragHandle.position.y),e=!0));var i=!1;if(!e){for(var o=0;o<this.markers.length;o++)i=i||this.drawCornerCursor(this.markers[o],t.x,t.y);i||y.setStyle(this.canvas,\"initial\")}i||e||!this.center.touchInBounds(t.x,t.y)?this.center.setOver(!1):(this.center.setOver(!0),y.setOver(this.canvas),y.setStyle(this.canvas,\"move\"))},e.prototype.drawCornerCursor=function(t,e,i){return t.touchInBounds(e,i)?(t.setOver(!0),t.getHorizontalNeighbour().position.x>t.position.x?t.getVerticalNeighbour().position.y>t.position.y?(y.setOver(this.canvas),y.setStyle(this.canvas,\"nwse-resize\")):(y.setOver(this.canvas),y.setStyle(this.canvas,\"nesw-resize\")):t.getVerticalNeighbour().position.y>t.position.y?(y.setOver(this.canvas),y.setStyle(this.canvas,\"nesw-resize\")):(y.setOver(this.canvas),y.setStyle(this.canvas,\"nwse-resize\")),!0):(t.setOver(!1),!1)},e.prototype.onTouchStart=function(t){if(this.crop.isImageSet()){var i=t.touches[0],o=e.getTouchPos(this.canvas,i),n=new l(o.x,o.y,i.identifier);a.instance.returnPoint(o),this.isMouseDown=!1;for(var s=0;s<this.markers.length;s++){this.markers[s].touchInBounds(n.x,n.y)&&(this.isMouseDown=!0)}this.center.touchInBounds(n.x,n.y)&&(this.isMouseDown=!0)}},e.prototype.onTouchEnd=function(t){if(this.crop.isImageSet()){for(var e=0;e<t.changedTouches.length;e++){var i=t.changedTouches[e],o=this.getDragTouchForID(i.identifier);o&&void 0!==o&&((o.dragHandle instanceof u||o.dragHandle instanceof m)&&o.dragHandle.setOver(!1),this.handleRelease(o))}0===this.currentDragTouches.length&&(this.isMouseDown=!1,this.currentlyInteracting=!1)}},e.prototype.drawImageIOSFix=function(t,e,i,o,n,s,r,a,h,c){t.drawImage(e,i,o,n,s,r,a,h,c)},e.prototype.onMouseDown=function(t){this.crop.isImageSet()&&(this.isMouseDown=!0)},e.prototype.onMouseUp=function(t){this.crop.isImageSet()&&(y.setReleased(this.canvas),this.isMouseDown=!1,this.handleRelease(new l(0,0,0)))},e}(v),S=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e}(Number),x=function(){function t(){}return t.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];I.debug&&console.log(t)},t}(),I=function(){function t(){}return t.addEvent=function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent(\"on\"+e,i)},t.imageHasData=function(t){return!!t.exifdata},t.base64ToArrayBuffer=function(t){t=t.replace(/^data:([^;]+);base64,/gim,\"\");for(var e=atob(t),i=e.length,o=new ArrayBuffer(i),n=new Uint8Array(o),s=0;s<i;s++)n[s]=e.charCodeAt(s);return o},t.objectURLToBlob=function(t,e){var i=new XMLHttpRequest;i.open(\"GET\",t,!0),i.responseType=\"blob\",i.onload=function(){200!==i.status&&0!==i.status||e(i.response)},i.send()},t.getImageData=function(e,i){function o(o){var n=t.findEXIFinJPEG(o),s=t.findIPTCinJPEG(o);e.exifdata=n||{},e.iptcdata=s||{},i&&i.call(e)}if(\"src\"in e&&e.src)if(/^data:/i.test(e.src))o(t.base64ToArrayBuffer(e.src));else if(/^blob:/i.test(e.src)){var n=new FileReader;n.onload=function(t){o(t.target.result)},t.objectURLToBlob(e.src,function(t){n.readAsArrayBuffer(t)})}else{var s=new XMLHttpRequest;s.onload=function(){if(200!==s.status&&0!==s.status)throw\"Could not load image\";o(s.response)},s.open(\"GET\",e.src,!0),s.responseType=\"arraybuffer\",s.send(null)}else if(FileReader&&(e instanceof Blob||e instanceof File)){var r=new FileReader;r.onload=function(t){x.log(\"Got file of length \"+t.target.result.byteLength),o(t.target.result)},r.readAsArrayBuffer(e)}},t.findEXIFinJPEG=function(e){var i=new DataView(e);if(x.log(\"Got file of length \"+e.byteLength),255!==i.getUint8(0)||216!==i.getUint8(1))return x.log(\"Not a valid JPEG\"),!1;for(var o,n=2,s=e.byteLength;n<s;){if(255!==i.getUint8(n))return x.log(\"Not a valid marker at offset \"+n+\", found: \"+i.getUint8(n)),!1;if(o=i.getUint8(n+1),x.log(o),225===o)return x.log(\"Found 0xFFE1 marker\"),t.readEXIFData(i,n+4);n+=2+i.getUint16(n+2)}},t.findIPTCinJPEG=function(e){var i=new DataView(e);if(x.log(\"Got file of length \"+e.byteLength),255!==i.getUint8(0)||216!==i.getUint8(1))return x.log(\"Not a valid JPEG\"),!1;for(var o,n,s=2,r=e.byteLength;s<r;){if(n=s,56===(o=i).getUint8(n)&&66===o.getUint8(n+1)&&73===o.getUint8(n+2)&&77===o.getUint8(n+3)&&4===o.getUint8(n+4)&&4===o.getUint8(n+5)){var a=i.getUint8(s+7);a%2!=0&&(a+=1),0===a&&(a=4);var h=s+8+a,c=i.getUint16(s+6+a);return t.readIPTCData(e,h,c)}s++}},t.readIPTCData=function(e,i,o){for(var n,s,r,a,h=new DataView(e),c={},p=i;p<i+o;)28===h.getUint8(p)&&2===h.getUint8(p+1)&&(a=h.getUint8(p+2))in t.IptcFieldMap&&((r=h.getInt16(p+3))+5,s=t.IptcFieldMap[a],n=t.getStringFromDB(h,p+5,r),c.hasOwnProperty(s)?c[s]instanceof Array?c[s].push(n):c[s]=[c[s],n]:c[s]=n),p++;return c},t.readTags=function(e,i,o,n,s){for(var r,a,h=e.getUint16(o,!s),c={},p=0;p<h;p++)r=o+12*p+2,(a=n[e.getUint16(r,!s)])||x.log(\"Unknown tag: \"+e.getUint16(r,!s)),c[a]=t.readTagValue(e,r,i,o,s);return c},t.readTagValue=function(e,i,o,n,s){var r,a,h,c,p,g,d=e.getUint16(i+2,!s),u=e.getUint32(i+4,!s),l=e.getUint32(i+8,!s)+o;switch(d){case 1:case 7:if(1===u)return e.getUint8(i+8,!s);for(r=u>4?l:i+8,a=[],c=0;c<u;c++)a[c]=e.getUint8(r+c);return a;case 2:return r=u>4?l:i+8,t.getStringFromDB(e,r,u-1);case 3:if(1===u)return e.getUint16(i+8,!s);for(r=u>2?l:i+8,a=[],c=0;c<u;c++)a[c]=e.getUint16(r+2*c,!s);return a;case 4:if(1===u)return e.getUint32(i+8,!s);for(a=[],c=0;c<u;c++)a[c]=e.getUint32(l+4*c,!s);return a;case 5:if(1===u)return p=e.getUint32(l,!s),g=e.getUint32(l+4,!s),(h=new C(p/g)).numerator=p,h.denominator=g,h;for(a=[],c=0;c<u;c++)p=e.getUint32(l+8*c,!s),g=e.getUint32(l+4+8*c,!s),a[c]=new C(p/g),a[c].numerator=p,a[c].denominator=g;return a;case 9:if(1===u)return e.getInt32(i+8,!s);for(a=[],c=0;c<u;c++)a[c]=e.getInt32(l+4*c,!s);return a;case 10:if(1===u)return e.getInt32(l,!s)/e.getInt32(l+4,!s);for(a=[],c=0;c<u;c++)a[c]=e.getInt32(l+8*c,!s)/e.getInt32(l+4+8*c,!s);return a}},t.getStringFromDB=function(t,e,i){for(var o=\"\",n=e;n<e+i;n++)o+=String.fromCharCode(t.getUint8(n));return o},t.readEXIFData=function(e,i){if(\"Exif\"!==t.getStringFromDB(e,i,4))return x.log(\"Not valid EXIF data! \"+t.getStringFromDB(e,i,4)),!1;var o,n,s,r,a,h=i+6;if(18761===e.getUint16(h))o=!1;else{if(19789!==e.getUint16(h))return x.log(\"Not valid TIFF data! (no 0x4949 or 0x4D4D)\"),!1;o=!0}if(42!==e.getUint16(h+2,!o))return x.log(\"Not valid TIFF data! (no 0x002A)\"),!1;var c=e.getUint32(h+4,!o);if(c<8)return x.log(\"Not valid TIFF data! (First offset less than 8)\",e.getUint32(h+4,!o)),!1;if((n=t.readTags(e,h,h+c,t.TiffTags,o)).ExifIFDPointer)for(s in r=t.readTags(e,h,h+n.ExifIFDPointer,t.Tags,o))if({}.hasOwnProperty.call(r,s)){switch(s){case\"LightSource\":case\"Flash\":case\"MeteringMode\":case\"ExposureProgram\":case\"SensingMethod\":case\"SceneCaptureType\":case\"SceneType\":case\"CustomRendered\":case\"WhiteBalance\":case\"GainControl\":case\"Contrast\":case\"Saturation\":case\"Sharpness\":case\"SubjectDistanceRange\":case\"FileSource\":r[s]=t.StringValues[s][r[s]];break;case\"ExifVersion\":case\"FlashpixVersion\":r[s]=String.fromCharCode(r[s][0],r[s][1],r[s][2],r[s][3]);break;case\"ComponentsConfiguration\":r[s]=t.StringValues.Components[r[s][0]]+t.StringValues.Components[r[s][1]]+t.StringValues.Components[r[s][2]]+t.StringValues.Components[r[s][3]]}n[s]=r[s]}if(n.GPSInfoIFDPointer)for(s in a=t.readTags(e,h,h+n.GPSInfoIFDPointer,t.GPSTags,o))if({}.hasOwnProperty.call(a,s)){switch(s){case\"GPSVersionID\":a[s]=a[s][0]+\".\"+a[s][1]+\".\"+a[s][2]+\".\"+a[s][3]}n[s]=a[s]}return n},t.checkImageType=function(t){return t instanceof Image||t instanceof HTMLImageElement},t.getData=function(e,i){return!(this.checkImageType(e)&&!e.complete)&&(t.imageHasData(e)?i&&i.call(e):t.getImageData(e,i),!0)},t.getTag=function(e,i){if(t.imageHasData(e))return e.exifdata[i]},t.getAllTags=function(e){if(!t.imageHasData(e))return{};var i,o=e.exifdata,n={};for(i in o)o.hasOwnProperty(i)&&(n[i]=o[i]);return n},t.pretty=function(e){if(!t.imageHasData(e))return\"\";var i,o=e.exifdata,n=\"\";for(i in o)o.hasOwnProperty(i)&&(\"object\"==typeof o[i]?o[i]instanceof Number?n+=i+\" : \"+o[i]+\" [\"+o[i].numerator+\"/\"+o[i].denominator+\"]\\r\\n\":n+=i+\" : [\"+o[i].length+\" values]\\r\\n\":n+=i+\" : \"+o[i]+\"\\r\\n\");return n},t.readFromBinaryFile=function(e){return t.findEXIFinJPEG(e)},t.debug=!1,t.IptcFieldMap={120:\"caption\",110:\"credit\",25:\"keywords\",55:\"dateCreated\",80:\"byline\",85:\"bylineTitle\",122:\"captionWriter\",105:\"headline\",116:\"copyright\",15:\"category\"},t.Tags={36864:\"ExifVersion\",40960:\"FlashpixVersion\",40961:\"ColorSpace\",40962:\"PixelXDimension\",40963:\"PixelYDimension\",37121:\"ComponentsConfiguration\",37122:\"CompressedBitsPerPixel\",37500:\"MakerNote\",37510:\"UserComment\",40964:\"RelatedSoundFile\",36867:\"DateTimeOriginal\",36868:\"DateTimeDigitized\",37520:\"SubsecTime\",37521:\"SubsecTimeOriginal\",37522:\"SubsecTimeDigitized\",33434:\"ExposureTime\",33437:\"FNumber\",34850:\"ExposureProgram\",34852:\"SpectralSensitivity\",34855:\"ISOSpeedRatings\",34856:\"OECF\",37377:\"ShutterSpeedValue\",37378:\"ApertureValue\",37379:\"BrightnessValue\",37380:\"ExposureBias\",37381:\"MaxApertureValue\",37382:\"SubjectDistance\",37383:\"MeteringMode\",37384:\"LightSource\",37385:\"Flash\",37396:\"SubjectArea\",37386:\"FocalLength\",41483:\"FlashEnergy\",41484:\"SpatialFrequencyResponse\",41486:\"FocalPlaneXResolution\",41487:\"FocalPlaneYResolution\",41488:\"FocalPlaneResolutionUnit\",41492:\"SubjectLocation\",41493:\"ExposureIndex\",41495:\"SensingMethod\",41728:\"FileSource\",41729:\"SceneType\",41730:\"CFAPattern\",41985:\"CustomRendered\",41986:\"ExposureMode\",41987:\"WhiteBalance\",41988:\"DigitalZoomRation\",41989:\"FocalLengthIn35mmFilm\",41990:\"SceneCaptureType\",41991:\"GainControl\",41992:\"Contrast\",41993:\"Saturation\",41994:\"Sharpness\",41995:\"DeviceSettingDescription\",41996:\"SubjectDistanceRange\",40965:\"InteroperabilityIFDPointer\",42016:\"ImageUniqueID\"},t.TiffTags={256:\"ImageWidth\",257:\"ImageHeight\",34665:\"ExifIFDPointer\",34853:\"GPSInfoIFDPointer\",40965:\"InteroperabilityIFDPointer\",258:\"BitsPerSample\",259:\"Compression\",262:\"PhotometricInterpretation\",274:\"Orientation\",277:\"SamplesPerPixel\",284:\"PlanarConfiguration\",530:\"YCbCrSubSampling\",531:\"YCbCrPositioning\",282:\"XResolution\",283:\"YResolution\",296:\"ResolutionUnit\",273:\"StripOffsets\",278:\"RowsPerStrip\",279:\"StripByteCounts\",513:\"JPEGInterchangeFormat\",514:\"JPEGInterchangeFormatLength\",301:\"TransferFunction\",318:\"WhitePoint\",319:\"PrimaryChromaticities\",529:\"YCbCrCoefficients\",532:\"ReferenceBlackWhite\",306:\"DateTime\",270:\"ImageDescription\",271:\"Make\",272:\"Model\",305:\"Software\",315:\"Artist\",33432:\"Copyright\"},t.GPSTags={0:\"GPSVersionID\",1:\"GPSLatitudeRef\",2:\"GPSLatitude\",3:\"GPSLongitudeRef\",4:\"GPSLongitude\",5:\"GPSAltitudeRef\",6:\"GPSAltitude\",7:\"GPSTimeStamp\",8:\"GPSSatellites\",9:\"GPSStatus\",10:\"GPSMeasureMode\",11:\"GPSDOP\",12:\"GPSSpeedRef\",13:\"GPSSpeed\",14:\"GPSTrackRef\",15:\"GPSTrack\",16:\"GPSImgDirectionRef\",17:\"GPSImgDirection\",18:\"GPSMapDatum\",19:\"GPSDestLatitudeRef\",20:\"GPSDestLatitude\",21:\"GPSDestLongitudeRef\",22:\"GPSDestLongitude\",23:\"GPSDestBearingRef\",24:\"GPSDestBearing\",25:\"GPSDestDistanceRef\",26:\"GPSDestDistance\",27:\"GPSProcessingMethod\",28:\"GPSAreaInformation\",29:\"GPSDateStamp\",30:\"GPSDifferential\"},t.StringValues={ExposureProgram:{0:\"Not defined\",1:\"Manual\",2:\"Normal program\",3:\"Aperture priority\",4:\"Shutter priority\",5:\"Creative program\",6:\"Action program\",7:\"Portrait mode\",8:\"Landscape mode\"},MeteringMode:{0:\"Unknown\",1:\"Average\",2:\"CenterWeightedAverage\",3:\"Spot\",4:\"MultiSpot\",5:\"Pattern\",6:\"Partial\",255:\"Other\"},LightSource:{0:\"Unknown\",1:\"Daylight\",2:\"Fluorescent\",3:\"Tungsten (incandescent light)\",4:\"Flash\",9:\"Fine weather\",10:\"Cloudy weather\",11:\"Shade\",12:\"Daylight fluorescent (D 5700 - 7100K)\",13:\"Day white fluorescent (N 4600 - 5400K)\",14:\"Cool white fluorescent (W 3900 - 4500K)\",15:\"White fluorescent (WW 3200 - 3700K)\",17:\"Standard light A\",18:\"Standard light B\",19:\"Standard light C\",20:\"D55\",21:\"D65\",22:\"D75\",23:\"D50\",24:\"ISO studio tungsten\",255:\"Other\"},Flash:{0:\"Flash did not fire\",1:\"Flash fired\",5:\"Strobe return light not detected\",7:\"Strobe return light detected\",9:\"Flash fired, compulsory flash mode\",13:\"Flash fired, compulsory flash mode, return light not detected\",15:\"Flash fired, compulsory flash mode, return light detected\",16:\"Flash did not fire, compulsory flash mode\",24:\"Flash did not fire, auto mode\",25:\"Flash fired, auto mode\",29:\"Flash fired, auto mode, return light not detected\",31:\"Flash fired, auto mode, return light detected\",32:\"No flash function\",65:\"Flash fired, red-eye reduction mode\",69:\"Flash fired, red-eye reduction mode, return light not detected\",71:\"Flash fired, red-eye reduction mode, return light detected\",73:\"Flash fired, compulsory flash mode, red-eye reduction mode\",77:\"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected\",79:\"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected\",89:\"Flash fired, auto mode, red-eye reduction mode\",93:\"Flash fired, auto mode, return light not detected, red-eye reduction mode\",95:\"Flash fired, auto mode, return light detected, red-eye reduction mode\"},SensingMethod:{1:\"Not defined\",2:\"One-chip color area sensor\",3:\"Two-chip color area sensor\",4:\"Three-chip color area sensor\",5:\"Color sequential area sensor\",7:\"Trilinear sensor\",8:\"Color sequential linear sensor\"},SceneCaptureType:{0:\"Standard\",1:\"Landscape\",2:\"Portrait\",3:\"Night scene\"},SceneType:{1:\"Directly photographed\"},CustomRendered:{0:\"Normal process\",1:\"Custom process\"},WhiteBalance:{0:\"Auto white balance\",1:\"Manual white balance\"},GainControl:{0:\"None\",1:\"Low gain up\",2:\"High gain up\",3:\"Low gain down\",4:\"High gain down\"},Contrast:{0:\"Normal\",1:\"Soft\",2:\"Hard\"},Saturation:{0:\"Normal\",1:\"Low saturation\",2:\"High saturation\"},Sharpness:{0:\"Normal\",1:\"Soft\",2:\"Hard\"},SubjectDistanceRange:{0:\"Unknown\",1:\"Macro\",2:\"Close view\",3:\"Distant view\"},FileSource:{3:\"DSC\"},Components:{0:\"\",1:\"Y\",2:\"Cb\",3:\"Cr\",4:\"R\",5:\"G\",6:\"B\"}},t}(),P=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=+t,this.y=+e,this.w=+i,this.h=+o}return t.prototype.toBounds=function(){return new h(this.x,this.y,this.w,this.h)},t.prototype.isInitialized=function(){return 0!==this.x&&0!==this.y&&0!==this.w&&0!==this.h},t}(),D=function(){function t(t){this.cropPositionChange=new s.w,this.onCrop=new s.w,this.imageSet=new s.w,this.renderer=t}return t.prototype.ngAfterViewInit=function(){var t=this.cropcanvas.nativeElement;this.settings||(this.settings=new p),this.settings.cropperClass&&this.renderer.setAttribute(t,\"class\",this.settings.cropperClass),this.settings.dynamicSizing?(this.windowListener=this.resize.bind(this),window.addEventListener(\"resize\",this.windowListener)):(this.renderer.setAttribute(t,\"width\",this.settings.canvasWidth.toString()),this.renderer.setAttribute(t,\"height\",this.settings.canvasHeight.toString())),this.cropper||(this.cropper=new b(this.settings)),this.cropper.prepare(t)},t.prototype.ngOnChanges=function(t){if(this.isCropPositionChanged(t)){if(this.cropper.updateCropPosition(this.cropPosition.toBounds()),this.cropper.isImageSet()){var e=this.cropper.getCropBounds();this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(e)}this.updateCropBounds()}t.inputImage&&this.setImage(t.inputImage.currentValue),t.settings&&this.cropper&&this.cropper.isImageSet()&&(this.cropper.updateSettings(this.settings),this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(this.cropper.getCropBounds()))},t.prototype.ngOnDestroy=function(){this.settings.dynamicSizing&&this.windowListener&&window.removeEventListener(\"resize\",this.windowListener)},t.prototype.onTouchMove=function(t){this.cropper.onTouchMove(t)},t.prototype.onTouchStart=function(t){this.cropper.onTouchStart(t)},t.prototype.onTouchEnd=function(t){this.cropper.onTouchEnd(t),this.cropper.isImageSet()&&(this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(this.cropper.getCropBounds()),this.updateCropBounds())},t.prototype.onMouseDown=function(t){this.cropper.onMouseDown(t)},t.prototype.onMouseUp=function(t){this.cropper.isImageSet()&&(this.cropper.onMouseUp(t),this.image.image=this.cropper.getCroppedImageHelper().src,this.onCrop.emit(this.cropper.getCropBounds()),this.updateCropBounds())},t.prototype.onMouseMove=function(t){this.cropper.onMouseMove(t)},t.prototype.fileChangeListener=function(t){var e=this;if(0!==t.target.files.length){var i=t.target.files[0];if(this.settings.allowedFilesRegex.test(i.name)){var o=new Image,n=new FileReader;n.addEventListener(\"loadend\",function(t){o.addEventListener(\"load\",function(){e.setImage(o)}),o.src=t.target.result}),n.readAsDataURL(i)}}},t.prototype.resize=function(){var t=this.cropcanvas.nativeElement;this.settings.canvasWidth=t.offsetWidth,this.settings.canvasHeight=t.offsetHeight,this.cropper.resizeCanvas(t.offsetWidth,t.offsetHeight,!0)},t.prototype.reset=function(){this.cropper.reset(),this.renderer.setAttribute(this.cropcanvas.nativeElement,\"class\",this.settings.cropperClass),this.image.image=this.cropper.getCroppedImageHelper().src},t.prototype.setImage=function(t,e){var i=this;void 0===e&&(e=null),this.imageSet.emit(!0),this.renderer.setAttribute(this.cropcanvas.nativeElement,\"class\",this.settings.cropperClass+\" \"+this.settings.croppingClass),this.raf=window.requestAnimationFrame(function(){i.raf&&window.cancelAnimationFrame(i.raf),t.naturalHeight>0&&t.naturalWidth>0&&(t.height=t.naturalHeight,t.width=t.naturalWidth,window.cancelAnimationFrame(i.raf),i.getOrientedImage(t,function(o){if(i.settings.dynamicSizing){var n=i.cropcanvas.nativeElement;i.settings.canvasWidth=n.offsetWidth,i.settings.canvasHeight=n.offsetHeight,i.cropper.resizeCanvas(n.offsetWidth,n.offsetHeight,!1)}i.cropper.setImage(o),i.cropPosition&&i.cropPosition.isInitialized()&&i.cropper.updateCropPosition(i.cropPosition.toBounds()),i.image.original=o;var s=i.cropper.getCropBounds();i.image.image=i.cropper.getCroppedImageHelper().src,i.image||(i.image=t),null!=e&&(s=e,i.cropper.setBounds(s),i.cropper.updateCropPosition(s)),i.onCrop.emit(s)}))})},t.prototype.isCropPositionChanged=function(t){return!!(this.cropper&&t.cropPosition&&this.isCropPositionUpdateNeeded)||(this.isCropPositionUpdateNeeded=!0,!1)},t.prototype.updateCropBounds=function(){var t=this.cropper.getCropBounds();this.cropPositionChange.emit(new P(t.left,t.top,t.width,t.height)),this.isCropPositionUpdateNeeded=!1},t.prototype.getOrientedImage=function(t,e){var i;I.getData(t,function(){var o=I.getTag(t,\"Orientation\");if([3,6,8].indexOf(o)>-1){var n=document.createElement(\"canvas\"),s=n.getContext(\"2d\"),r=t.width,a=t.height,h=0,c=0,p=0;switch(o){case 3:h=-t.width,c=-t.height,p=180;break;case 6:r=t.height,a=t.width,c=-t.height,p=90;break;case 8:r=t.height,a=t.width,h=-t.width,p=270}n.width=r,n.height=a,s.rotate(p*Math.PI/180),s.drawImage(t,h,c),(i=document.createElement(\"img\")).width=r,i.height=a,i.addEventListener(\"load\",function(){e(i)}),i.src=n.toDataURL(\"image/png\")}else e(i=t)})},t.decorators=[{type:s.n,args:[{selector:\"img-cropper\",template:'\\n        <span class=\"ng2-imgcrop\">\\n          <input *ngIf=\"!settings.noFileInput\" #fileInput type=\"file\" accept=\"image/*\" (change)=\"fileChangeListener($event)\">\\n          <canvas #cropcanvas\\n                  (mousedown)=\"onMouseDown($event)\"\\n                  (mouseup)=\"onMouseUp($event)\"\\n                  (mousemove)=\"onMouseMove($event)\"\\n                  (mouseleave)=\"onMouseUp($event)\"\\n                  (touchmove)=\"onTouchMove($event)\"\\n                  (touchend)=\"onTouchEnd($event)\"\\n                  (touchstart)=\"onTouchStart($event)\">\\n          </canvas>\\n        </span>\\n      '}]}],t.ctorParameters=function(){return[{type:s.Z}]},t.propDecorators={cropcanvas:[{type:s.Oa,args:[\"cropcanvas\",void 0]}],fileInput:[{type:s.Oa,args:[\"fileInput\"]}],settings:[{type:s.F,args:[\"settings\"]}],image:[{type:s.F,args:[\"image\"]}],inputImage:[{type:s.F,args:[\"inputImage\"]}],cropper:[{type:s.F}],cropPosition:[{type:s.F}],cropPositionChange:[{type:s.R}],onCrop:[{type:s.R}],imageSet:[{type:s.R}]},t}(),M=function(){function t(){}return t.decorators=[{type:s.K,args:[{imports:[n.b],declarations:[D],exports:[D]}]}],t.ctorParameters=function(){return[]},t}();i.d(e,\"c\",function(){return M}),i.d(e,\"b\",function(){return D}),i.d(e,!1,function(){return b}),i.d(e,\"a\",function(){return p}),i.d(e,!1,function(){return c}),i.d(e,!1,function(){return h}),i.d(e,!1,function(){return P})},jY6i:function(t,e){t.exports='<div class=\"ant-modal-content\">\\r\\n    <button type=\"button\" class=\"ant-modal-close\" aria-label=\"Close\" (click)=\"activeModal.dismiss()\">\\r\\n        <span class=\"ant-modal-close-x\"><i nz-icon type=\"close\"></i></span>\\r\\n    </button>\\r\\n    <div class=\"ant-modal-header\">\\r\\n        <div class=\"ant-modal-title\">{{name}}</div>\\r\\n    </div>\\r\\n<div class=\"ant-modal-body clearfix\" style=\"width:100%;height:340px;overflow:hidden;\">\\r\\n    <p class=\"error\" *ngIf=\"msg\" style=\"text-align: center;\"><span>{{msg}}</span></p>\\r\\n    <div class=\"rev-img-cropper\">\\r\\n        <img-cropper #cropper [image]=\"data\" [settings]=\"cropperSettings\" (onCrop)=\"cropped($event)\"></img-cropper>\\r\\n    </div>\\r\\n    <div class=\"rev-img-cnt\">\\r\\n        <div class=\"rev-img-btn\">\\r\\n            <button type=\"button\" class=\"ant-btn ant-btn-primary\">\\u9009\\u62e9\\u56fe\\u7247</button>\\r\\n            <input type=\"file\" (change)=\"fileChangeListener($event)\" accept=\"image/jpeg,image/png,image/jpg\"/>\\r\\n        </div>\\r\\n        <div class=\"rev-img-show\" *ngIf=\"data.image\" >\\r\\n            <img [src]=\"data.image\"/>\\r\\n        </div>\\r\\n        \\x3c!--<dl *ngIf=\"data.image\">--\\x3e\\r\\n            \\x3c!--<dt>\\u5f53\\u524d\\u56fe\\u7247\\u7b80\\u4ecb</dt>--\\x3e\\r\\n            \\x3c!--<dd>\\u56fe\\u7247\\u5bbd\\u5ea6:{{cropperWidth}}</dd>--\\x3e\\r\\n            \\x3c!--<dd>\\u56fe\\u7247\\u9ad8\\u5ea6:{{cropperHeight}}</dd>--\\x3e\\r\\n        \\x3c!--</dl>--\\x3e\\r\\n    </div>\\r\\n</div>\\r\\n<div class=\"ant-modal-footer\">\\r\\n    <button type=\"button\" class=\"ant-btn ant-btn-primary\"  [disabled]=\"isClick\" (click)=\"onClickImage()\">\\u786e\\u5b9a</button>\\r\\n</div>\\r\\n<canvas id=\"canvas\"></canvas>\\r\\n</div>\\r\\n'}}]);","extractedComments":[]}