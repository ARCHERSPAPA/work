{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{\"5lIa\":function(n,l,t){\"use strict\";t.d(l,\"a\",function(){return s}),t(\"M1gU\"),t(\"OHOg\"),t(\"5aMp\");var e=t(\"f8yE\"),u=(t(\"I3Dz\"),t(\"FoyA\")),o=t(\"lcOY\"),s=function(){function n(n,l,t,e,u){this.modal=n,this.depart=l,this.request=t,this.warn=e,this.quote=u}return n.prototype.ngOnInit=function(){1===this.type?(this.depart.loadDepart(0,2),this.title=this.department.departmentId?\"\\u4fee\\u6539\\u90e8\\u95e8\":\"\\u6dfb\\u52a0\\u90e8\\u95e8\",console.log(this.department),this.showDepart=this.department):this.showDesigner(this.type)?(this.title=this.designers?\"\\u4fee\\u6539\\u8bbe\\u8ba1\\u5e08\":\"\\u6dfb\\u52a0\\u8bbe\\u8ba1\\u5e08\",this.showDesigners=this.designers,this.quote.setQuoteSelectDesigners(this.designers)):this.showChiefs(this.type)?(this.quote.setSelectQuoteMembers(this.members),this.showChief=this.quote.divideMemberByType(o.a.STAFF.CLASS_3),this.title=this.showChief?\"\\u4fee\\u6539\\u5de5\\u957f\":\"\\u6dfb\\u52a0\\u5de5\\u957f\"):this.showSupervisors(this.type)?(this.quote.setSelectQuoteMembers(this.members),this.showSupervisor=this.quote.divideMemberByType(o.a.STAFF.CLASS_4),this.title=this.showSupervisor?\"\\u4fee\\u6539\\u76d1\\u7406\":\"\\u6dfb\\u52a0\\u76d1\\u7406\"):this.showLeaders(this.type)?(this.quote.setSelectQuoteMembers(this.members),this.showLeader=this.quote.divideMemberByType(o.a.STAFF.CLASS_5),this.title=this.showLeader?\"\\u4fee\\u6539\\u5de5\\u7a0b\\u603b\\u76d1\":\"\\u6dfb\\u52a0\\u5de5\\u7a0b\\u603b\\u76d1\"):9===this.type?(this.title=\"\\u4fee\\u6539\\u5ba2\\u6237\",this.quoteBase=this.user):10===this.type?(this.title=\"\\u521b\\u5efa\\u5ba2\\u6237\",this.quoteBase=this.user):11===this.type&&(this.title=\"\\u521b\\u5efa\\u5ba2\\u6237\",this.quoteBase=this.user),console.log(this.type)},n.prototype.ngAfterViewInit=function(){var n=this;setTimeout(function(){n.departList=n.depart.getDepartList(2)},1e3)},n.prototype.ngDoCheck=function(){1===this.type?this.depart.getSelectDepartByName()&&(this.showDepart=this.depart.getSelectDepartByName()):this.showDesigner(this.type)?this.quote.getQuoteSelectDesigners()&&(this.showDesigners=this.quote.getQuoteSelectDesigners()):this.showChiefs(this.type)?this.quote.getSelectQuoteMembers()&&(this.showChief=this.quote.divideMemberByType(o.a.STAFF.CLASS_3)):this.showSupervisors(this.type)?this.quote.getSelectQuoteMembers()&&(this.showSupervisor=this.quote.divideMemberByType(o.a.STAFF.CLASS_4)):this.showLeaders(this.type)&&this.quote.getSelectQuoteMembers()&&(this.showLeader=this.quote.divideMemberByType(o.a.STAFF.CLASS_5))},n.prototype.delDepart=function(){this.depart.removeSelectDepartByName(),this.showDepart=[]},n.prototype.submit=function(n){var l=this,t=this;if(1===t.type)t.showDepart&&t.showDepart.name?t.request.doPost({url:\"saveDepartQuote\",data:o={id:t.id,departmentId:t.showDepart.id},success:function(n){n&&200==n.code?t.modal.close(t.showDepart):t.warn.onError(n.msg||e.a.FAIL.DATA)}}):t.warn.onWarn(e.a.SELECT_NOT_EMPTY);else if(Object(u.J)(this.type))if(t.quote.justiceRadio())if(t.componentDesigners().length>0){var o={id:t.id,designerVos:t.componentDesigners()};t.request.doPost({url:2===t.type?\"saveDesignerQuote\":201===t.type?\"buildProjectDesigner\":\"\",data:o,success:function(n){n&&200==n.code?(t.modal.close(t.componentDesigners()),t.exist(null)):(l.modal.dismiss(),t.warn.onError(n.msg||e.a.FAIL.DATA))}})}else t.warn.onWarn(e.a.SELECT_NOT_EMPTY);else t.warn.onWarn(e.a.ERROR.RADIO);else t.showChiefs(this.type)?t.showChief?t.personalByAddOrFix(t.id,t.showChief):t.showMsg(e.a.SELECT_NOT_EMPTY):t.showSupervisors(this.type)?t.showSupervisor?t.personalByAddOrFix(t.id,t.showSupervisor):t.showMsg(e.a.SELECT_NOT_EMPTY):t.showLeaders(this.type)?t.showLeader?t.personalByAddOrFix(t.id,t.showLeader):t.showMsg(e.a.SELECT_NOT_EMPTY):9===t.type?((o=n).id=t.userId,o.quoteId=t.id,t.request.doPost({url:\"saveCustomerQuote\",data:o,success:function(n){n&&200==n.code?t.modal.close(n.data):(t.modal.dismiss(),t.warn.onError(n.msg||e.a.FAIL.DATA))}})):10===t.type?((o=n).quoteId=t.id,t.request.doPost({url:\"buildCustomer\",data:o,success:function(n){n&&200==n.code?t.modal.close(n.data):(t.modal.dismiss(),t.warn.onError(n.msg||e.a.FAIL.DATA))}})):11===t.type&&((o=n).quoteId=t.id,t.request.doPost({url:\"buildProjectByCustomer\",data:o,success:function(n){n&&200==n.code?t.modal.close(n.data):(t.modal.dismiss(),t.warn.onError(n.msg||e.a.FAIL.DATA))}}))},n.prototype.exist=function(n){1===this.type?this.depart.removeSelectDepartByName():this.removeAllDesigners(this.type)&&this.quote.removeAllQuoteDesigner(),this.modal.dismiss()},n.prototype.componentDesigners=function(){var n=[];if(this.showDesigners&&this.showDesigners.length>0)for(var l=0,t=this.showDesigners;l<t.length;l++){var e=t[l];n.push({id:e.id,name:e.name,phone:e.phone,percentage:e.percentage})}return n},n.prototype.removeDesigner=function(n){this.quote.removeQuoteDesigner(n),this.showDesigners=this.quote.getQuoteSelectDesigners()},n.prototype.modifyRatio=function(n){n.modify=!0},n.prototype.saveRatio=function(n){n.modify=!1,this.quote.justiceRadio()||this.warn.onWarn(e.a.ERROR.RADIO)},n.prototype.personalByAddOrFix=function(){for(var n=this,l=[],t=0;t<arguments.length;t++)l[t]=arguments[t];var u=this;u.getPersonUrl(u.type)&&u.request.doPost({url:u.getPersonUrl(u.type),data:{id:l[0],userId:l[1].memberId,type:l[1].type},success:function(t){t&&200==t.code?(u.warn.onSuccess(t.msg||e.a.SUCCESS.DATA),n.modal.close(l[1])):u.warn.onError(t.msg||e.a.FAIL.DATA)}})},n.prototype.removeMember=function(n){this.quote.removeQuoteMember(n)},n.prototype.showMsg=function(n){var l=this;this.msg=n,setTimeout(function(){l.msg=null},2e3)},n.prototype.showCustomer=function(){switch(this.type){case 9:case 10:case 11:return!0}return!1},n.prototype.showDesigner=function(n){return Object(u.J)(n)},n.prototype.showChiefs=function(n){return Object(u.I)(n)},n.prototype.showSupervisors=function(n){return Object(u.T)(n)},n.prototype.showLeaders=function(n){return Object(u.N)(n)},n.prototype.getPersonUrl=function(n){switch(n){case 3:case 4:case 5:return\"addPersonal\";case 301:case 401:case 501:return\"buildProjectPersonal\";default:return null}},n.prototype.removeAllDesigners=function(n){switch(n){case 2:case 201:case 3:case 301:case 4:case 401:case 5:case 501:return!0;default:return!1}},n.prototype.ngOnDestroy=function(){this.depart.removeSelectDepartByName()},n}()},EkbW:function(n,l,t){\"use strict\";t.d(l,\"a\",function(){return s});var e=t(\"lcOY\"),u=t(\"f8yE\"),o=(t(\"OHOg\"),t(\"5aMp\"),t(\"gIcY\")),s=function(){function n(n,l,t,u){this.modal=n,this.req=l,this.warn=t,this.fb=u,this.pageNo=e.a.PAGE.PAGE_NO,this.pageSize=e.a.PAGE.PAGE_SIZE,this.total=e.a.PAGE.PAGE_TOTAL,this.departmentId=0,this.userType=1,this.workerList=[],this.nodes=[]}return n.prototype.ngOnInit=function(){this.title=\"\\u9009\\u62e9\\u4eba\\u5458\",this.loadDepartment(),this.searchForm=this.fb.group({content:[this.content,[o.x.maxLength(30)]]})},n.prototype.searchData=function(){this.pageNo=e.a.PAGE.PAGE_NO,this.changeData()},n.prototype.onClick=function(n){this.pageNo=e.a.PAGE.PAGE_NO,this.pageSize=e.a.PAGE.PAGE_SIZE,this.departmentId=n.node.origin.id,this.changeData()},n.prototype.changeData=function(){var n,l=this,t={pageNo:this.pageNo,pageSize:this.pageSize,state:0};this.departmentId&&(t.departmentId=this.departmentId),1===this.userType?n=\"listEmployee\":2===this.userType&&(n=\"workerList\"),this.content&&(t.searchInfo=this.content,t.departmentId&&delete t.departmentId),this.req.doPost({url:n,data:t,success:function(n){n&&200==n.code?(l.workerList=n.data.pageSet,l.total=n.data.total):l.warn.onError(n.msg||u.a.FAIL.DATA)}})},n.prototype.handleUserType=function(){this.pageNo=e.a.PAGE.PAGE_NO,this.changeData()},n.prototype.loadDepartment=function(){var n=this;this.req.doPost({url:\"listDepartAddEmp\",data:{},success:function(l){if(l&&200==l.code){n.nodes=l.data;for(var t=0;t<n.nodes.length;t++)n.nodes[t].title=n.nodes[t].name,n.nodes[t].value=n.nodes[t].id,n.nodes[t].key=n.nodes[t].id,n.nodes[t].isLeaf=!n.nodes[t].ownSubset;n.nodes[0].selected=!0,n.departmentId=n.nodes[0].value,n.changeData()}else n.warn.onError(l.msg||u.a.FAIL.DATA)}})},n.prototype.onExpandChange=function(n){var l=this;0===n.node.getChildren().length&&n.node.isExpanded&&this.req.doPost({url:\"listDepartSearch\",data:{superiorDepartmentId:n.node.key},success:function(t){if(t&&200==t.code){for(var e=0;e<t.data.length;e++)t.data[e].title=t.data[e].name,t.data[e].value=t.data[e].id,t.data[e].key=t.data[e].id,t.data[e].isLeaf=!t.data[e].ownSubset;n.node.addChildren(t.data)}else l.warn.onError(t.msg||u.a.FAIL.DATA)}})},n.prototype.selectChange=function(n){this.selectData=[n]},n.prototype.removeData=function(){this.selectData=[]},n.prototype.submit=function(n){n.preventDefault(),n.stopPropagation(),this.selectData.length>0?(this.selectData[0].userType=this.userType,this.modal.close(this.selectData)):this.warn.onWarn(u.a.SELECT_NOT_EMPTY)},n.prototype.ngOnDestroy=function(){this.selectData=[],this.workerList=[],this.content=\"\",this.departmentId=null},n}()},\"f/5I\":function(n,l,t){\"use strict\";var e=t(\"CcnG\"),u=t(\"Ip0R\"),o=t(\"6Cds\");t(\"xjYj\"),t(\"ZYCi\"),t(\"OHOg\"),t(\"5aMp\"),t(\"I3Dz\"),t(\"4GxJ\"),t(\"Ouoq\"),t(\"8J7W\"),t.d(l,\"a\",function(){return s}),t.d(l,\"b\",function(){return B});var s=e.Sa({encapsulation:0,styles:[['@charset \"UTF-8\";.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]{border:1px solid #dedede;margin-bottom:10px}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]:last-child{margin-bottom:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]{padding:5px 16px;background:#efefef;font-size:0;position:relative}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;font-size:12px;font-weight:600;margin-right:20px}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   .fix[_ngcontent-%COMP%]{position:absolute;right:50px;top:5px}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dt[_ngcontent-%COMP%]   .fix[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0a8ddf;font-weight:500;margin-right:0;margin-left:10px}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]{font-size:0;border-top:1px solid #dedede;margin:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{width:50%;float:left;border-right:1px solid #dedede;padding:5px 16px;margin:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:12px}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]:last-child{margin-right:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd.pad[_ngcontent-%COMP%]{padding:5px 16px}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd.pad[_ngcontent-%COMP%]   .anticon[_ngcontent-%COMP%]{font-size:15px;cursor:pointer}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd.pad[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;margin:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]:after{content:\"\";clear:both;zoom:1;visibility:hidden;display:block}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]:last-child{border-bottom:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;vertical-align:top;font-size:12px;word-break:break-all;margin-right:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   span.w10[_ngcontent-%COMP%]{width:10%;text-align:center;margin-right:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   span.w15[_ngcontent-%COMP%]{width:15%;margin-right:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   span.w60[_ngcontent-%COMP%]{width:60%;margin-right:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   span.w40[_ngcontent-%COMP%]{width:40%;margin-right:0}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   span.pad-text[_ngcontent-%COMP%]{text-align:right;padding-right:3%}.detail-head[_ngcontent-%COMP%]   dl[_ngcontent-%COMP%]   dd[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{margin-right:0}']],data:{}});function a(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"span\",[],null,null,null,null,null)),(n()(),e.mb(1,null,[\"\\u521b\\u5efa\\u65f6\\u95f4\\uff1a\",\"\"])),e.ib(2,2)],null,function(n,l){var t=l.component;n(l,1,0,e.nb(l,1,0,n(l,2,0,e.eb(l.parent,0),t.baseQuote.createTime,\"yyyy-MM-dd HH:mm\")))})}function i(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(9,u.baseQuote)&&e),e},null,null)),(n()(),e.mb(-1,null,[\"\\u4fee\\u6539\"]))],null,null)}function r(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"span\",[[\"class\",\"fix\"]],null,null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,i)),e.Ta(2,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){n(l,2,0,l.component.baseQuote.quoteNo)},null)}function c(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"span\",[[\"class\",\"fix\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.buildCustomer(10,u.baseQuote)&&e),e},null,null)),(n()(),e.mb(-1,null,[\"\\u4fee\\u6539\"]))],null,null)}function d(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"span\",[[\"class\",\"fix\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.createCustomer(11,u.baseQuote)&&e),e},null,null)),(n()(),e.mb(2,null,[\"\",\"\"]))],null,function(n,l){var t=l.component;n(l,2,0,t.baseQuote&&t.baseQuote.customerAreaId?\"\\u7f16\\u8f91\":\"\\u6dfb\\u52a0\")})}function p(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,10,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[],null,null,null,null,null)),(n()(),e.mb(2,null,[\"\",\"\",\"\",\"\",\"\"])),(n()(),e.Ua(3,0,null,null,1,\"span\",[],null,null,null,null,null)),(n()(),e.mb(4,null,[\"\",\"\"])),(n()(),e.Ua(5,0,null,null,1,\"span\",[],null,null,null,null,null)),(n()(),e.mb(6,null,[\"\",\"\"])),(n()(),e.Ua(7,0,null,null,1,\"span\",[],null,null,null,null,null)),(n()(),e.mb(8,null,[\"\",\"\"])),(n()(),e.Ua(9,0,null,null,1,\"span\",[],null,null,null,null,null)),(n()(),e.mb(10,null,[\"\",\"\"]))],null,function(n,l){var t=l.component;n(l,2,0,t.baseQuote.customerCityName,t.baseQuote.customerAreaName,t.baseQuote.customerHouseAddress,t.baseQuote.customerRoomNumber),n(l,4,0,t.baseQuote.customerHouseType?t.baseQuote.customerHouseType:\"\"),n(l,6,0,t.baseQuote.customerHouseArea?t.baseQuote.customerHouseArea+\"m\\xb2\":\"\"),n(l,8,0,t.baseQuote.customerName?t.baseQuote.customerName:\"\"),n(l,10,0,t.baseQuote.customerPhone?t.baseQuote.customerPhone:\"\")})}function h(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"p\",[],null,null,null,null,null)),(n()(),e.mb(2,null,[\"\",\"\"]))],null,function(n,l){n(l,2,0,l.component.baseQuote.customerRemark)})}function m(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(1,u.baseQuote)&&e),e},null,null)),(n()(),e.mb(1,null,[\"\",\"\\u90e8\\u95e8\"]))],null,function(n,l){var t=l.component;n(l,1,0,t.baseQuote&&t.baseQuote.quoteDepartmentName?\"\\u4fee\\u6539\":\"\\u6dfb\\u52a0\")})}function g(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(2,u.designQuote)&&e),e},null,null)),(n()(),e.mb(-1,null,[\"\\u4fee\\u6539\\u8bbe\\u8ba1\\u5e08\"]))],null,null)}function f(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(201,u.designQuote)&&e),e},null,null)),(n()(),e.mb(-1,null,[\"\\u6dfb\\u52a0\\u8bbe\\u8ba1\\u5e08\"]))],null,null)}function b(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(201,u.designQuote)&&e),e},null,null)),(n()(),e.mb(-1,null,[\"\\u4fee\\u6539\\u8bbe\\u8ba1\\u5e08\"]))],null,null)}function y(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,4,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w40\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u6240\\u5c5e\\u90e8\\u95e8\\uff1a\"])),(n()(),e.Ua(3,0,null,null,1,\"span\",[[\"class\",\"w60 pad-text\"]],null,null,null,null,null)),(n()(),e.mb(4,null,[\"\",\"\"]))],null,function(n,l){n(l,4,0,l.component.baseQuote.quoteDepartmentName)})}function I(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,3,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w0\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u6240\\u5c5e\\u90e8\\u95e8\\uff1a\"])),(n()(),e.Ua(3,0,null,null,0,\"span\",[[\"class\",\"w60 pad-text\"]],null,null,null,null,null))],null,null)}function T(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,9,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w60\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u7ed1\\u5b9a\\u8bbe\\u5907\\uff1a\"])),(n()(),e.Ua(3,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\xa0\\xa0\"])),(n()(),e.Ua(5,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(6,null,[\"\",\"\"])),(n()(),e.Ua(7,0,null,null,2,\"span\",[[\"class\",\"10\"]],null,null,null,null,null)),(n()(),e.Ua(8,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.unbind(u.deviceQuote.deviceNo)&&e),e},null,null)),(n()(),e.mb(-1,null,[\"\\u89e3\\u7ed1\"]))],null,function(n,l){var t=l.component;n(l,6,0,t.deviceQuote.deviceNo?t.deviceQuote.deviceNo:\"--\")})}function O(n){return e.ob(0,[(n()(),e.Ua(0,16777216,null,null,3,\"span\",[[\"class\",\"w10\"],[\"nz-tooltip\",\"\"],[\"nzTrigger\",\"click\"]],[[2,\"ant-tooltip-open\",null]],null,null,null,null)),e.Ta(1,4407296,null,0,o.jb,[e.k,e.S,e.j,e.F,[2,o.ib]],{nzTitle:[0,\"nzTitle\"],setTitle:[1,\"setTitle\"],nzTrigger:[2,\"nzTrigger\"]},null),(n()(),e.Ua(2,0,null,null,1,\"i\",[[\"nz-icon\",\"\"],[\"type\",\"exclamation-circle\"]],null,null,null,null,null)),e.Ta(3,2834432,null,0,o.Ca,[o.ac,e.k,e.F],{type:[0,\"type\"]},null),(n()(),e.La(0,null,null,0))],function(n,l){n(l,1,0,\"\",l.parent.context.$implicit.percentage+\"%\",\"click\"),n(l,3,0,\"exclamation-circle\")},function(n,l){n(l,0,0,e.eb(l,1).isOpen)})}function v(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,8,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w60\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u8bbe\\u8ba1\\u5e08\\uff1a\"])),(n()(),e.Ua(3,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(4,null,[\"\",\"\"])),(n()(),e.Ua(5,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(6,null,[\"\",\"\"])),(n()(),e.La(16777216,null,null,1,null,O)),e.Ta(8,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){n(l,8,0,l.context.$implicit.percentage)},function(n,l){n(l,4,0,l.context.$implicit.memberName?l.context.$implicit.memberName:l.context.$implicit.name),n(l,6,0,l.context.$implicit.phone)})}function S(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,5,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w60\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u8bbe\\u8ba1\\u5e08\\uff1a\"])),(n()(),e.Ua(3,0,null,null,0,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.Ua(4,0,null,null,0,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.Ua(5,0,null,null,0,\"span\",[[\"class\",\"w10\"]],null,null,null,null,null))],null,null)}function M(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(5,u.memberQuote)&&e),e},null,null)),(n()(),e.mb(1,null,[\"\",\"\"]))],null,function(n,l){n(l,1,0,l.component.leader?\"\\u4fee\\u6539\":\"\\u6dfb\\u52a0\")})}function C(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(501,u.memberQuote)&&e),e},null,null)),(n()(),e.mb(1,null,[\"\",\"\"]))],null,function(n,l){n(l,1,0,l.component.leader?\"\\u4fee\\u6539\":\"\\u6dfb\\u52a0\")})}function w(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"span\",[[\"class\",\"w10\"]],null,null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,C)),e.Ta(2,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){n(l,2,0,l.component.baseQuote.quoteNo)},null)}function Q(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,11,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w60\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u5de5\\u7a0b\\u603b\\u76d1\\uff1a\"])),(n()(),e.Ua(3,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(4,null,[\"\",\"\"])),(n()(),e.Ua(5,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(6,null,[\"\",\"\"])),(n()(),e.Ua(7,0,null,null,2,\"span\",[[\"class\",\"w10\"]],[[8,\"hidden\",0]],null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,M)),e.Ta(9,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,w)),e.Ta(11,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){var t=l.component;n(l,9,0,t.baseQuote.quoteNo),n(l,11,0,t.controlBuildInfo())},function(n,l){var t=l.component;n(l,4,0,t.leader&&t.leader.memberName?t.leader.memberName:\"\"),n(l,6,0,t.leader&&t.leader.phone?t.leader.phone:\"\"),n(l,7,0,!t.showRoleEditByState())})}function P(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(3,u.memberQuote)&&e),e},null,null)),(n()(),e.mb(1,null,[\"\",\"\"]))],null,function(n,l){n(l,1,0,l.component.chief?\"\\u4fee\\u6539\":\"\\u6dfb\\u52a0\")})}function _(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(301,u.memberQuote)&&e),e},null,null)),(n()(),e.mb(1,null,[\"\",\"\"]))],null,function(n,l){n(l,1,0,l.component.chief?\"\\u4fee\\u6539\":\"\\u6dfb\\u52a0\")})}function q(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"span\",[[\"class\",\"w10\"]],null,null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,_)),e.Ta(2,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){n(l,2,0,l.component.baseQuote.quoteNo)},null)}function A(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,11,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w60\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u5de5\\u957f\\uff1a\"])),(n()(),e.Ua(3,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(4,null,[\"\",\"\"])),(n()(),e.Ua(5,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(6,null,[\"\",\"\"])),(n()(),e.Ua(7,0,null,null,2,\"span\",[[\"class\",\"w10\"]],[[8,\"hidden\",0]],null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,P)),e.Ta(9,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,q)),e.Ta(11,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){var t=l.component;n(l,9,0,t.baseQuote.quoteNo),n(l,11,0,t.controlBuildInfo())},function(n,l){var t=l.component;n(l,4,0,t.chief&&t.chief.memberName?t.chief.memberName:\"\"),n(l,6,0,t.chief&&t.chief.phone?t.chief.phone:\"\"),n(l,7,0,!t.showRoleEditByState())})}function D(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(4,u.memberQuote)&&e),e},null,null)),(n()(),e.mb(1,null,[\"\",\"\"]))],null,function(n,l){n(l,1,0,l.component.supervisor?\"\\u4fee\\u6539\":\"\\u6dfb\\u52a0\")})}function E(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0,u=n.component;return\"click\"===l&&(e=!1!==u.modifyInfo(401,u.memberQuote)&&e),e},null,null)),(n()(),e.mb(1,null,[\"\",\"\"]))],null,function(n,l){n(l,1,0,l.component.supervisor?\"\\u4fee\\u6539\":\"\\u6dfb\\u52a0\")})}function U(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"span\",[[\"class\",\"w10\"]],null,null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,E)),e.Ta(2,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){n(l,2,0,l.component.baseQuote.quoteNo)},null)}function L(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,11,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w60\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u76d1\\u7406\\uff1a\"])),(n()(),e.Ua(3,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(4,null,[\"\",\"\"])),(n()(),e.Ua(5,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(6,null,[\"\",\"\"])),(n()(),e.Ua(7,0,null,null,2,\"span\",[[\"class\",\"w10\"]],[[8,\"hidden\",0]],null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,D)),e.Ta(9,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,U)),e.Ta(11,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){var t=l.component;n(l,9,0,t.baseQuote.quoteNo),n(l,11,0,t.controlBuildInfo())},function(n,l){var t=l.component;n(l,4,0,t.supervisor&&t.supervisor.memberName?t.supervisor.memberName:\"\"),n(l,6,0,t.supervisor&&t.supervisor.phone?t.supervisor.phone:\"\"),n(l,7,0,!t.showRoleEditByState())})}function k(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,1,\"a\",[[\"href\",\"javascript:void(0)\"]],null,[[null,\"click\"]],function(n,l,t){var e=!0;return\"click\"===l&&(e=!1!==n.component.sendDispatcher()&&e),e},null,null)),(n()(),e.mb(-1,null,[\"\\u6307\\u6d3e\"]))],null,null)}function N(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,2,\"span\",[[\"class\",\"w10\"]],null,null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,k)),e.Ta(2,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){n(l,2,0,l.component.baseQuote.quoteNo)},null)}function F(n){return e.ob(0,[(n()(),e.Ua(0,0,null,null,8,\"dd\",[[\"class\",\"pad\"]],null,null,null,null,null)),(n()(),e.Ua(1,0,null,null,1,\"span\",[[\"class\",\"w60\"]],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u4fdd\\u4fee\\u4eba\\u5458\\uff1a\"])),(n()(),e.Ua(3,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(4,null,[\"\",\"\"])),(n()(),e.Ua(5,0,null,null,1,\"span\",[[\"class\",\"w15\"]],null,null,null,null,null)),(n()(),e.mb(6,null,[\"\",\"\"])),(n()(),e.La(16777216,null,null,1,null,N)),e.Ta(8,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){n(l,8,0,l.component.responsibility.status<2)},function(n,l){var t=l.component;n(l,4,0,t.responsibility.name),n(l,6,0,t.responsibility.phone)})}function B(n){return e.ob(0,[e.gb(0,u.e,[e.t]),(n()(),e.Ua(1,0,null,null,48,\"div\",[[\"class\",\"detail-head\"]],null,null,null,null,null)),(n()(),e.Ua(2,0,null,null,15,\"dl\",[],null,null,null,null,null)),(n()(),e.Ua(3,0,null,null,10,\"dt\",[],null,null,null,null,null)),(n()(),e.Ua(4,0,null,null,1,\"span\",[],null,null,null,null,null)),(n()(),e.mb(5,null,[\"\\u62a5\\u4ef7\\u7f16\\u53f7\\uff1a\",\"\"])),(n()(),e.La(16777216,null,null,1,null,a)),e.Ta(7,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,r)),e.Ta(9,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,c)),e.Ta(11,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,d)),e.Ta(13,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,p)),e.Ta(15,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,h)),e.Ta(17,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.Ua(18,0,null,null,31,\"dl\",[],null,null,null,null,null)),(n()(),e.Ua(19,0,null,null,12,\"dt\",[],null,null,null,null,null)),(n()(),e.Ua(20,0,null,null,1,\"span\",[],null,null,null,null,null)),(n()(),e.mb(-1,null,[\"\\u90e8\\u95e8\\u53ca\\u9879\\u76ee\\u4eba\\u5458\"])),(n()(),e.Ua(22,0,null,null,4,\"span\",[[\"class\",\"fix\"]],null,null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,m)),e.Ta(24,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,g)),e.Ta(26,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.Ua(27,0,null,null,4,\"span\",[[\"class\",\"fix\"]],null,null,null,null,null)),(n()(),e.La(16777216,null,null,1,null,f)),e.Ta(29,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,b)),e.Ta(31,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,y)),e.Ta(33,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,I)),e.Ta(35,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,T)),e.Ta(37,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,v)),e.Ta(39,278528,null,0,u.m,[e.S,e.O,e.r],{ngForOf:[0,\"ngForOf\"]},null),(n()(),e.La(16777216,null,null,1,null,S)),e.Ta(41,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,Q)),e.Ta(43,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,A)),e.Ta(45,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,L)),e.Ta(47,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null),(n()(),e.La(16777216,null,null,1,null,F)),e.Ta(49,16384,null,0,u.n,[e.S,e.O],{ngIf:[0,\"ngIf\"]},null)],function(n,l){var t=l.component;n(l,7,0,t.baseQuote.createTime),n(l,9,0,t.controlHeadInfo()&&t.baseQuote.customerPhone),n(l,11,0,t.controlHeadInfo()&&!t.baseQuote.customerPhone),n(l,13,0,t.controlBuildUser()),n(l,15,0,t.baseQuote&&(t.baseQuote.customerHouseType||t.baseQuote.customerHouseArea||t.baseQuote.customerName||t.baseQuote.customerPhone)),n(l,17,0,t.baseQuote&&t.baseQuote.customerRemark),n(l,24,0,t.baseQuote.quoteNo&&t.controlHeadInfo()),n(l,26,0,t.baseQuote.quoteNo&&t.controlHeadDesign()),n(l,29,0,t.controlBuildEmptyDesign()),n(l,31,0,t.controlBuildDesign()),n(l,33,0,t.baseQuote&&t.baseQuote.quoteDepartmentName),n(l,35,0,!(t.baseQuote&&t.baseQuote.quoteDepartmentName||4===t.state)),n(l,37,0,4===t.state&&t.deviceQuote),n(l,39,0,t.designQuote),n(l,41,0,!t.designQuote||t.designQuote&&0==t.designQuote.length),n(l,43,0,t.showRoleByState()),n(l,45,0,t.showRoleByState()),n(l,47,0,t.showRoleByState()),n(l,49,0,7===t.state)},function(n,l){var t=l.component;n(l,5,0,t.baseQuote.quoteNo?t.baseQuote.quoteNo:\"--\")})}},xjYj:function(n,l,t){\"use strict\";t(\"5aMp\"),t(\"OHOg\"),t(\"I3Dz\");var e=t(\"5lIa\"),u=function(){this.companyId=\"\",this.Id=0,this.customerHouseAddress=\"\",this.customerHouseArea=\"\",this.customerHouseType=\"\",this.customerId=\"\",this.customerName=\"\",this.customerRemark=\"\",this.state=0,this.createTime=\"\",this.customerCityName=\"\",this.customerAreaName=\"\",this.quoteDepartmentName=\"\",this.quoteDepartmentId=\"\"},o=t(\"f8yE\"),s=t(\"FoyA\"),a=t(\"lcOY\"),i=(t(\"Ouoq\"),t(\"8J7W\"),t(\"EkbW\"));t.d(l,\"a\",function(){return r});var r=function(){function n(n,l,t,e,o,s,i){this.activatedRoute=n,this.request=l,this.warn=t,this.quote=e,this.modal=o,this.user=s,this.settle=i,this.cid=0,this.baseQuote=new u,this.state=a.a.STATE.ITEM_1,this.responsibility={name:\"\",phone:\"\",status:0}}return n.prototype.ngOnInit=function(){var n=this;try{this.state=this.activatedRoute.snapshot.firstChild?parseInt(this.activatedRoute.snapshot.firstChild.params.state):parseInt(this.activatedRoute.snapshot.paramMap.get(\"state\"))}catch(n){this.state=a.a.STATE.ITEM_1}this.activatedRoute.queryParams.subscribe(function(l){l&&l.rid&&(n.rid=l.rid)}),this.activatedRoute.queryParams.subscribe(function(l){l&&l.cid&&(n.cid=l.cid,n.state===a.a.STATE.ITEM_2?n.quote.loadFinanceHeadById(n.cid):n.quote.loadQuoteHeadById(n.cid))}),this.state===a.a.STATE.ITEM_4&&(this.settle.loadAttendWorkers(this.cid),this.settle.loadAttendRange(this.cid))},n.prototype.ngAfterViewInit=function(){this.loadHead()},n.prototype.loadHead=function(){var n=this,l=this;l.cid&&(l.baseQuote&&l.designQuote||setTimeout(function(){l.quote.getQuoteInfo()&&(l.baseQuote=l.quote.getQuoteInfo().quoteBase,l.designQuote=l.quote.getQuoteInfo().designers,n.memberQuote=n.quote.getQuoteInfo().members),l.quote.getFinanceInfo()&&(l.baseQuote=l.quote.getFinanceInfo().quoteBase,l.designQuote=l.quote.getFinanceInfo().designers,n.memberQuote=n.quote.getFinanceInfo().members)},1e3))},n.prototype.ngDoCheck=function(){var n=this.activatedRoute.snapshot;this.type=n.firstChild?n.firstChild.url[0].path:null,this.quote&&this.quote.getQuoteInfo()&&(this.baseQuote.quoteDepartmentName=this.quote.getQuoteDepart().departmentName,this.baseQuote.quoteDepartmentId=this.quote.getQuoteDepart().departmentId,this.baseQuote=this.quote.getQuoteInfo().quoteBase,this.designQuote=this.quote.getQuoteInfo().designers,this.deviceQuote=this.quote.getQuoteInfo().device?this.quote.getQuoteInfo().device:\"\"),this.quote&&this.quote.getSelectQuoteMembers()&&(this.memberQuote=this.quote.getSelectQuoteMembers()),this.leader=this.getMemberByType(a.a.STAFF.CLASS_5),this.chief=this.getMemberByType(a.a.STAFF.CLASS_3),this.supervisor=this.getMemberByType(a.a.STAFF.CLASS_4),this.quote.getRecords()&&(this.quote.getRecords().responsibilityName&&this.quote.getRecords().responsibilityPhone&&(this.responsibility.name=this.quote.getRecords().responsibilityName,this.responsibility.phone=this.quote.getRecords().responsibilityPhone),this.responsibility.status=this.quote.getRecords().status)},n.prototype.modifyInfo=function(n,l){3===n?this.judgeChiefByItem(n,l):this.infoModal(n,l)},n.prototype.buildCustomer=function(n,l){this.infoModal(n,l)},n.prototype.createCustomer=function(n,l){this.infoModal(n,l)},n.prototype.getTypeName=function(n){return Object(s.u)(n)},n.prototype.getMemberByType=function(n){var l=null;if(this.memberQuote&&this.memberQuote.length>0)for(var t=0,e=this.memberQuote;t<e.length;t++){var u=e[t];u.type===n&&(l=u)}return l},n.prototype.judgeChiefByItem=function(n,l){var t=this,e=this;e.request.doPost({url:\"checkPersonnel\",data:{id:e.cid},success:function(u){u&&200==u.code?t.infoModal(n,l):e.warn.onError(u.msg||o.a.FAIL.DATA)}})},n.prototype.infoModal=function(n,l){var t=this,u=this,o=u.modal.open(e.a,{centered:!0,keyboard:!0,backdrop:\"static\"});o.componentInstance.type=n,o.componentInstance.id=u.quote.getDataId(),1===n?o.componentInstance.department={departmentId:l.quoteDepartmentId,departmentName:l.quoteDepartmentName}:Object(s.J)(n)?o.componentInstance.designers=l:Object(s.P)(n)?o.componentInstance.members=l:9===n?(o.componentInstance.userId=u.quote.getCustomerId()?u.quote.getCustomerId():0,o.componentInstance.user=l):10===n?o.componentInstance.user=l:11===n&&(o.componentInstance.user=l),o.result.then(function(l){l&&(1===n?u.quote.setQuoteDepart(l):n===a.a.STAFF.CLASS_2?u.quote.loadQuoteHeadById(u.quote.getDataId()?u.quote.getDataId():u.cid):n===a.a.STAFF.CLASS_5?u.quote.updateSelectQuoteMembers(l):n===a.a.STAFF.CLASS_3?u.quote.updateSelectQuoteMembers(l):n===a.a.STAFF.CLASS_4?u.quote.updateSelectQuoteMembers(l):(u.quote.setQuoteBase(l),t.state===a.a.STATE.ITEM_2?t.quote.loadFinanceHeadById(t.cid):t.quote.loadQuoteHeadById(t.cid),u.changeType(u.type,u.quote.getDataId()?u.quote.getDataId():u.cid)))},function(n){t.cid&&t.quote.loadQuoteHeadById(t.cid)})},n.prototype.showRoleByState=function(){return this.state===a.a.STATE.ITEM_4||this.state===a.a.STATE.ITEM_6||this.state===a.a.STATE.ITEM_7},n.prototype.showRoleEditByState=function(){return this.baseQuote&&this.baseQuote.quoteDepartmentId&&Object(s.R)(this.baseQuote)&&this.state!==a.a.STATE.ITEM_6},n.prototype.controlHeadInfo=function(){return Object(s.e)(this.baseQuote)&&Object(s.k)(this.user.getPhone(),this.designQuote)&&this.state!==a.a.STATE.ITEM_4&&this.state!==a.a.STATE.ITEM_6&&0===this.baseQuote.retreat},n.prototype.controlHeadDesign=function(){return!Object(s.M)(this.baseQuote)&&Object(s.k)(this.user.getPhone(),this.designQuote)&&this.state!==a.a.STATE.ITEM_4&&this.state!==a.a.STATE.ITEM_6&&0===this.baseQuote.retreat},n.prototype.controlBuildInfo=function(){return!this.baseQuote.quoteDepartmentId&&Object(s.c)(this.baseQuote)&&this.state===a.a.STATE.ITEM_4&&0===this.baseQuote.retreat},n.prototype.controlBuildUser=function(){return Object(s.d)(this.baseQuote)&&this.state===a.a.STATE.ITEM_4&&0===this.baseQuote.retreat},n.prototype.controlBuildDesign=function(){return!Object(s.M)(this.baseQuote)&&Object(s.k)(this.user.getPhone(),this.designQuote)&&this.state===a.a.STATE.ITEM_4&&0===this.baseQuote.retreat},n.prototype.controlBuildEmptyDesign=function(){return!Object(s.M)(this.baseQuote)&&(!this.designQuote||this.designQuote.length<1)&&this.state===a.a.STATE.ITEM_4&&0===this.baseQuote.retreat},n.prototype.changeType=function(n,l){switch(n){case\"price\":this.quote.loadData(l),this.quote.loadPrice(l);break;case\"contract\":this.quote.loadContract(l)}},n.prototype.unbind=function(n){var l=this;l.cid&&n&&l.request.doPost({url:\"unbindProject\",data:{projectId:l.cid,did:n},success:function(n){n&&200==n.code?(l.warn.onSuccess(n.msg||o.a.SUCCESS.DATA),l.state===a.a.STATE.ITEM_2?l.quote.loadFinanceHeadById(l.cid):l.quote.loadQuoteHeadById(l.cid)):l.warn.onError(n.msg||o.a.FAIL.DATA)}})},n.prototype.sendDispatcher=function(){var n=this;this.modal.open(i.a,{centered:!0,keyboard:!0,backdrop:\"static\",size:\"lg\"}).result.then(function(l){l&&l.length>0&&n.request.doPost({url:\"recordAssignCard\",data:{recordId:n.rid,responsibilityId:l[0].id,userType:l[0].userType},success:function(l){l&&200==l.code?(n.warn.onSuccess(l.msg||o.a.SUCCESS.DATA),n.quote.loadRecordDynamic(n.rid)):n.warn.onWarn(l.msg||o.a.FAIL.DATA)}})},function(n){})},n.prototype.ngOnDestroy=function(){this.settle.setRangeTime(null),this.settle.setWorkers(null),this.responsibility=null,this.quote.setRecords(null),this.quote.setQuoteData(null),this.quote.setQuoteBase(null),this.quote.setQuoteDepart(null)},n}()}}]);","extractedComments":[]}